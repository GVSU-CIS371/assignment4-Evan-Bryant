(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const wt={},gr=[],Le=()=>{},bh=()=>!1,Zi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ha=e=>e.startsWith("onUpdate:"),ae=Object.assign,za=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Xp=Object.prototype.hasOwnProperty,_t=(e,t)=>Xp.call(e,t),et=Array.isArray,mr=e=>Bs(e)==="[object Map]",to=e=>Bs(e)==="[object Set]",Nc=e=>Bs(e)==="[object Date]",it=e=>typeof e=="function",Bt=e=>typeof e=="string",Ce=e=>typeof e=="symbol",St=e=>e!==null&&typeof e=="object",Sh=e=>(St(e)||it(e))&&it(e.then)&&it(e.catch),Rh=Object.prototype.toString,Bs=e=>Rh.call(e),Yp=e=>Bs(e).slice(8,-1),Ch=e=>Bs(e)==="[object Object]",Ka=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fs=qa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),eo=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Jp=/-\w/g,Ae=eo(e=>e.replace(Jp,t=>t.slice(1).toUpperCase())),Zp=/\B([A-Z])/g,xn=eo(e=>e.replace(Zp,"-$1").toLowerCase()),no=eo(e=>e.charAt(0).toUpperCase()+e.slice(1)),jo=eo(e=>e?`on${no(e)}`:""),En=(e,t)=>!Object.is(e,t),_i=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ph=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ro=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let xc;const so=()=>xc||(xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xr(e){if(et(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Bt(r)?rg(r):xr(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Bt(e)||St(e))return e}const tg=/;(?![^(]*\))/g,eg=/:([^]+)/,ng=/\/\*[^]*?\*\//g;function rg(e){const t={};return e.replace(ng,"").split(tg).forEach(n=>{if(n){const r=n.split(eg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Wa(e){let t="";if(Bt(e))t=e;else if(et(e))for(let n=0;n<e.length;n++){const r=Wa(e[n]);r&&(t+=r+" ")}else if(St(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const sg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ig=qa(sg);function Vh(e){return!!e||e===""}function og(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=wr(e[r],t[r]);return n}function wr(e,t){if(e===t)return!0;let n=Nc(e),r=Nc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Ce(e),r=Ce(t),n||r)return e===t;if(n=et(e),r=et(t),n||r)return n&&r?og(e,t):!1;if(n=St(e),r=St(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!wr(e[a],t[a]))return!1}}return String(e)===String(t)}function ag(e,t){return e.findIndex(n=>wr(n,t))}const Dh=e=>!!(e&&e.__v_isRef===!0),cr=e=>Bt(e)?e:e==null?"":et(e)||St(e)&&(e.toString===Rh||!it(e.toString))?Dh(e)?cr(e.value):JSON.stringify(e,Nh,2):String(e),Nh=(e,t)=>Dh(t)?Nh(e,t.value):mr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[$o(r,i)+" =>"]=s,n),{})}:to(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>$o(n))}:Ce(t)?$o(t):St(t)&&!et(t)&&!Ch(t)?String(t):t,$o=(e,t="")=>{var n;return Ce(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ne;class xh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ne,!t&&ne&&(this.index=(ne.scopes||(ne.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ne;try{return ne=this,t()}finally{ne=n}}}on(){++this._on===1&&(this.prevScope=ne,ne=this)}off(){this._on>0&&--this._on===0&&(ne=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Oh(e){return new xh(e)}function Mh(){return ne}function lg(e,t=!1){ne&&ne.cleanups.push(e)}let At;const qo=new WeakSet;class kh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ne&&ne.active&&ne.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qo.has(this)&&(qo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Oc(this),Uh(this);const t=At,n=Re;At=this,Re=!0;try{return this.fn()}finally{Bh(this),At=t,Re=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Xa(t);this.deps=this.depsTail=void 0,Oc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){la(this)&&this.run()}get dirty(){return la(this)}}let Lh=0,ds,ps;function Fh(e,t=!1){if(e.flags|=8,t){e.next=ps,ps=e;return}e.next=ds,ds=e}function Ga(){Lh++}function Qa(){if(--Lh>0)return;if(ps){let t=ps;for(ps=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ds;){let t=ds;for(ds=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Uh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Xa(r),cg(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function la(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(jh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function jh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ss)||(e.globalVersion=Ss,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!la(e))))return;e.flags|=2;const t=e.dep,n=At,r=Re;At=e,Re=!0;try{Uh(e);const s=e.fn(e._value);(t.version===0||En(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{At=n,Re=r,Bh(e),e.flags&=-3}}function Xa(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Xa(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function cg(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Re=!0;const $h=[];function Ye(){$h.push(Re),Re=!1}function Je(){const e=$h.pop();Re=e===void 0?!0:e}function Oc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=At;At=void 0;try{t()}finally{At=n}}}let Ss=0;class ug{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ya{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!Re||At===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==At)n=this.activeLink=new ug(At,this),At.deps?(n.prevDep=At.depsTail,At.depsTail.nextDep=n,At.depsTail=n):At.deps=At.depsTail=n,qh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=At.depsTail,n.nextDep=void 0,At.depsTail.nextDep=n,At.depsTail=n,At.deps===n&&(At.deps=r)}return n}trigger(t){this.version++,Ss++,this.notify(t)}notify(t){Ga();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Qa()}}}function qh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)qh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ci=new WeakMap,Wn=Symbol(""),ca=Symbol(""),Rs=Symbol("");function se(e,t,n){if(Re&&At){let r=Ci.get(e);r||Ci.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ya),s.map=r,s.key=n),s.track()}}function We(e,t,n,r,s,i){const a=Ci.get(e);if(!a){Ss++;return}const l=u=>{u&&u.trigger()};if(Ga(),t==="clear")a.forEach(l);else{const u=et(e),f=u&&Ka(n);if(u&&n==="length"){const d=Number(r);a.forEach((g,v)=>{(v==="length"||v===Rs||!Ce(v)&&v>=d)&&l(g)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Rs)),t){case"add":u?f&&l(a.get("length")):(l(a.get(Wn)),mr(e)&&l(a.get(ca)));break;case"delete":u||(l(a.get(Wn)),mr(e)&&l(a.get(ca)));break;case"set":mr(e)&&l(a.get(Wn));break}}Qa()}function hg(e,t){const n=Ci.get(e);return n&&n.get(t)}function ar(e){const t=gt(e);return t===e?t:(se(t,"iterate",Rs),we(e)?t:t.map(Qt))}function io(e){return se(e=gt(e),"iterate",Rs),e}const fg={__proto__:null,[Symbol.iterator](){return Ho(this,Symbol.iterator,Qt)},concat(...e){return ar(this).concat(...e.map(t=>et(t)?ar(t):t))},entries(){return Ho(this,"entries",e=>(e[1]=Qt(e[1]),e))},every(e,t){return ze(this,"every",e,t,void 0,arguments)},filter(e,t){return ze(this,"filter",e,t,n=>n.map(Qt),arguments)},find(e,t){return ze(this,"find",e,t,Qt,arguments)},findIndex(e,t){return ze(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ze(this,"findLast",e,t,Qt,arguments)},findLastIndex(e,t){return ze(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ze(this,"forEach",e,t,void 0,arguments)},includes(...e){return zo(this,"includes",e)},indexOf(...e){return zo(this,"indexOf",e)},join(e){return ar(this).join(e)},lastIndexOf(...e){return zo(this,"lastIndexOf",e)},map(e,t){return ze(this,"map",e,t,void 0,arguments)},pop(){return ss(this,"pop")},push(...e){return ss(this,"push",e)},reduce(e,...t){return Mc(this,"reduce",e,t)},reduceRight(e,...t){return Mc(this,"reduceRight",e,t)},shift(){return ss(this,"shift")},some(e,t){return ze(this,"some",e,t,void 0,arguments)},splice(...e){return ss(this,"splice",e)},toReversed(){return ar(this).toReversed()},toSorted(e){return ar(this).toSorted(e)},toSpliced(...e){return ar(this).toSpliced(...e)},unshift(...e){return ss(this,"unshift",e)},values(){return Ho(this,"values",Qt)}};function Ho(e,t,n){const r=io(e),s=r[t]();return r!==e&&!we(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const dg=Array.prototype;function ze(e,t,n,r,s,i){const a=io(e),l=a!==e&&!we(e),u=a[t];if(u!==dg[t]){const g=u.apply(e,i);return l?Qt(g):g}let f=n;a!==e&&(l?f=function(g,v){return n.call(this,Qt(g),v,e)}:n.length>2&&(f=function(g,v){return n.call(this,g,v,e)}));const d=u.call(a,f,r);return l&&s?s(d):d}function Mc(e,t,n,r){const s=io(e);let i=n;return s!==e&&(we(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,Qt(l),u,e)}),s[t](i,...r)}function zo(e,t,n){const r=gt(e);se(r,"iterate",Rs);const s=r[t](...n);return(s===-1||s===!1)&&tl(n[0])?(n[0]=gt(n[0]),r[t](...n)):s}function ss(e,t,n=[]){Ye(),Ga();const r=gt(e)[t].apply(e,n);return Qa(),Je(),r}const pg=qa("__proto__,__v_isRef,__isVue"),Hh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ce));function gg(e){Ce(e)||(e=String(e));const t=gt(this);return se(t,"has",e),t.hasOwnProperty(e)}class zh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?bg:Qh:i?Gh:Wh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=et(t);if(!s){let u;if(a&&(u=fg[n]))return u;if(n==="hasOwnProperty")return gg}const l=Reflect.get(t,n,Mt(t)?t:r);if((Ce(n)?Hh.has(n):pg(n))||(s||se(t,"get",n),i))return l;if(Mt(l)){const u=a&&Ka(n)?l:l.value;return s&&St(u)?ha(u):u}return St(l)?s?ha(l):oo(l):l}}class Kh extends zh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=Sn(i);if(!we(r)&&!Sn(r)&&(i=gt(i),r=gt(r)),!et(t)&&Mt(i)&&!Mt(r))return u||(i.value=r),!0}const a=et(t)&&Ka(n)?Number(n)<t.length:_t(t,n),l=Reflect.set(t,n,r,Mt(t)?t:s);return t===gt(s)&&(a?En(r,i)&&We(t,"set",n,r):We(t,"add",n,r)),l}deleteProperty(t,n){const r=_t(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&We(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Ce(n)||!Hh.has(n))&&se(t,"has",n),r}ownKeys(t){return se(t,"iterate",et(t)?"length":Wn),Reflect.ownKeys(t)}}class mg extends zh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const _g=new Kh,yg=new mg,Eg=new Kh(!0);const ua=e=>e,oi=e=>Reflect.getPrototypeOf(e);function vg(e,t,n){return function(...r){const s=this.__v_raw,i=gt(s),a=mr(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),d=n?ua:t?Pi:Qt;return!t&&se(i,"iterate",u?ca:Wn),{next(){const{value:g,done:v}=f.next();return v?{value:g,done:v}:{value:l?[d(g[0]),d(g[1])]:d(g),done:v}},[Symbol.iterator](){return this}}}}function ai(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Tg(e,t){const n={get(s){const i=this.__v_raw,a=gt(i),l=gt(s);e||(En(s,l)&&se(a,"get",s),se(a,"get",l));const{has:u}=oi(a),f=t?ua:e?Pi:Qt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&se(gt(s),"iterate",Wn),s.size},has(s){const i=this.__v_raw,a=gt(i),l=gt(s);return e||(En(s,l)&&se(a,"has",s),se(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=gt(l),f=t?ua:e?Pi:Qt;return!e&&se(u,"iterate",Wn),l.forEach((d,g)=>s.call(i,f(d),f(g),a))}};return ae(n,e?{add:ai("add"),set:ai("set"),delete:ai("delete"),clear:ai("clear")}:{add(s){!t&&!we(s)&&!Sn(s)&&(s=gt(s));const i=gt(this);return oi(i).has.call(i,s)||(i.add(s),We(i,"add",s,s)),this},set(s,i){!t&&!we(i)&&!Sn(i)&&(i=gt(i));const a=gt(this),{has:l,get:u}=oi(a);let f=l.call(a,s);f||(s=gt(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?En(i,d)&&We(a,"set",s,i):We(a,"add",s,i),this},delete(s){const i=gt(this),{has:a,get:l}=oi(i);let u=a.call(i,s);u||(s=gt(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&We(i,"delete",s,void 0),f},clear(){const s=gt(this),i=s.size!==0,a=s.clear();return i&&We(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=vg(s,e,t)}),n}function Ja(e,t){const n=Tg(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(_t(n,s)&&s in r?n:r,s,i)}const Ig={get:Ja(!1,!1)},wg={get:Ja(!1,!0)},Ag={get:Ja(!0,!1)};const Wh=new WeakMap,Gh=new WeakMap,Qh=new WeakMap,bg=new WeakMap;function Sg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rg(e){return e.__v_skip||!Object.isExtensible(e)?0:Sg(Yp(e))}function oo(e){return Sn(e)?e:Za(e,!1,_g,Ig,Wh)}function Cg(e){return Za(e,!1,Eg,wg,Gh)}function ha(e){return Za(e,!0,yg,Ag,Qh)}function Za(e,t,n,r,s){if(!St(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Rg(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function vn(e){return Sn(e)?vn(e.__v_raw):!!(e&&e.__v_isReactive)}function Sn(e){return!!(e&&e.__v_isReadonly)}function we(e){return!!(e&&e.__v_isShallow)}function tl(e){return e?!!e.__v_raw:!1}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function el(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&Ph(e,"__v_skip",!0),e}const Qt=e=>St(e)?oo(e):e,Pi=e=>St(e)?ha(e):e;function Mt(e){return e?e.__v_isRef===!0:!1}function Xh(e){return Pg(e,!1)}function Pg(e,t){return Mt(e)?e:new Vg(e,t)}class Vg{constructor(t,n){this.dep=new Ya,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gt(t),this._value=n?t:Qt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||we(t)||Sn(t);t=r?t:gt(t),En(t,n)&&(this._rawValue=t,this._value=r?t:Qt(t),this.dep.trigger())}}function Dg(e){return Mt(e)?e.value:e}const Ng={get:(e,t,n)=>t==="__v_raw"?e:Dg(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Mt(s)&&!Mt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Yh(e){return vn(e)?e:new Proxy(e,Ng)}function xg(e){const t=et(e)?new Array(e.length):{};for(const n in e)t[n]=Mg(e,n);return t}class Og{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return hg(gt(this._object),this._key)}}function Mg(e,t,n){const r=e[t];return Mt(r)?r:new Og(e,t,n)}class kg{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ya(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return Fh(this,!0),!0}get value(){const t=this.dep.track();return jh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Lg(e,t,n=!1){let r,s;return it(e)?r=e:(r=e.get,s=e.set),new kg(r,s,n)}const li={},Vi=new WeakMap;let Hn;function Fg(e,t=!1,n=Hn){if(n){let r=Vi.get(n);r||Vi.set(n,r=[]),r.push(e)}}function Ug(e,t,n=wt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=K=>s?K:we(K)||s===!1||s===0?Ge(K,1):Ge(K);let d,g,v,S,x=!1,U=!1;if(Mt(e)?(g=()=>e.value,x=we(e)):vn(e)?(g=()=>f(e),x=!0):et(e)?(U=!0,x=e.some(K=>vn(K)||we(K)),g=()=>e.map(K=>{if(Mt(K))return K.value;if(vn(K))return f(K);if(it(K))return u?u(K,2):K()})):it(e)?t?g=u?()=>u(e,2):e:g=()=>{if(v){Ye();try{v()}finally{Je()}}const K=Hn;Hn=d;try{return u?u(e,3,[S]):e(S)}finally{Hn=K}}:g=Le,t&&s){const K=g,rt=s===!0?1/0:s;g=()=>Ge(K(),rt)}const B=Mh(),W=()=>{d.stop(),B&&B.active&&za(B.effects,d)};if(i&&t){const K=t;t=(...rt)=>{K(...rt),W()}}let G=U?new Array(e.length).fill(li):li;const Q=K=>{if(!(!(d.flags&1)||!d.dirty&&!K))if(t){const rt=d.run();if(s||x||(U?rt.some((Et,w)=>En(Et,G[w])):En(rt,G))){v&&v();const Et=Hn;Hn=d;try{const w=[rt,G===li?void 0:U&&G[0]===li?[]:G,S];G=rt,u?u(t,3,w):t(...w)}finally{Hn=Et}}}else d.run()};return l&&l(Q),d=new kh(g),d.scheduler=a?()=>a(Q,!1):Q,S=K=>Fg(K,!1,d),v=d.onStop=()=>{const K=Vi.get(d);if(K){if(u)u(K,4);else for(const rt of K)rt();Vi.delete(d)}},t?r?Q(!0):G=d.run():a?a(Q.bind(null,!0),!0):d.run(),W.pause=d.pause.bind(d),W.resume=d.resume.bind(d),W.stop=W,W}function Ge(e,t=1/0,n){if(t<=0||!St(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Mt(e))Ge(e.value,t,n);else if(et(e))for(let r=0;r<e.length;r++)Ge(e[r],t,n);else if(to(e)||mr(e))e.forEach(r=>{Ge(r,t,n)});else if(Ch(e)){for(const r in e)Ge(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ge(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function js(e,t,n,r){try{return r?e(...r):e()}catch(s){ao(s,t,n)}}function $e(e,t,n,r){if(it(e)){const s=js(e,t,n,r);return s&&Sh(s)&&s.catch(i=>{ao(i,t,n)}),s}if(et(e)){const s=[];for(let i=0;i<e.length;i++)s.push($e(e[i],t,n,r));return s}}function ao(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||wt;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let g=0;g<d.length;g++)if(d[g](e,u,f)===!1)return}l=l.parent}if(i){Ye(),js(i,null,10,[e,u,f]),Je();return}}Bg(e,n,s,r,a)}function Bg(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const ue=[];let Oe=-1;const _r=[];let dn=null,ur=0;const Jh=Promise.resolve();let Di=null;function nl(e){const t=Di||Jh;return e?t.then(this?e.bind(this):e):t}function jg(e){let t=Oe+1,n=ue.length;for(;t<n;){const r=t+n>>>1,s=ue[r],i=Cs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function rl(e){if(!(e.flags&1)){const t=Cs(e),n=ue[ue.length-1];!n||!(e.flags&2)&&t>=Cs(n)?ue.push(e):ue.splice(jg(t),0,e),e.flags|=1,Zh()}}function Zh(){Di||(Di=Jh.then(ef))}function $g(e){et(e)?_r.push(...e):dn&&e.id===-1?dn.splice(ur+1,0,e):e.flags&1||(_r.push(e),e.flags|=1),Zh()}function kc(e,t,n=Oe+1){for(;n<ue.length;n++){const r=ue[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ue.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function tf(e){if(_r.length){const t=[...new Set(_r)].sort((n,r)=>Cs(n)-Cs(r));if(_r.length=0,dn){dn.push(...t);return}for(dn=t,ur=0;ur<dn.length;ur++){const n=dn[ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}dn=null,ur=0}}const Cs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ef(e){try{for(Oe=0;Oe<ue.length;Oe++){const t=ue[Oe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),js(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Oe<ue.length;Oe++){const t=ue[Oe];t&&(t.flags&=-2)}Oe=-1,ue.length=0,tf(),Di=null,(ue.length||_r.length)&&ef()}}let Yt=null,nf=null;function Ni(e){const t=Yt;return Yt=e,nf=e&&e.type.__scopeId||null,t}function as(e,t=Yt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Wc(-1);const i=Ni(t);let a;try{a=e(...s)}finally{Ni(i),r._d&&Wc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function is(e,t){if(Yt===null)return e;const n=ho(Yt),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=wt]=t[s];i&&(it(i)&&(i={mounted:i,updated:i}),i.deep&&Ge(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function $n(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(Ye(),$e(u,n,8,[e.el,l,e,t]),Je())}}const qg=Symbol("_vte"),Hg=e=>e.__isTeleport,zg=Symbol("_leaveCb");function sl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,sl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function $s(e,t){return it(e)?ae({name:e.name},t,{setup:e}):e}function rf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xi=new WeakMap;function gs(e,t,n,r,s=!1){if(et(e)){e.forEach((x,U)=>gs(x,t&&(et(t)?t[U]:t),n,r,s));return}if(yr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&gs(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?ho(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,d=l.refs===wt?l.refs={}:l.refs,g=l.setupState,v=gt(g),S=g===wt?bh:x=>_t(v,x);if(f!=null&&f!==u){if(Lc(t),Bt(f))d[f]=null,S(f)&&(g[f]=null);else if(Mt(f)){f.value=null;const x=t;x.k&&(d[x.k]=null)}}if(it(u))js(u,l,12,[a,d]);else{const x=Bt(u),U=Mt(u);if(x||U){const B=()=>{if(e.f){const W=x?S(u)?g[u]:d[u]:u.value;if(s)et(W)&&za(W,i);else if(et(W))W.includes(i)||W.push(i);else if(x)d[u]=[i],S(u)&&(g[u]=d[u]);else{const G=[i];u.value=G,e.k&&(d[e.k]=G)}}else x?(d[u]=a,S(u)&&(g[u]=a)):U&&(u.value=a,e.k&&(d[e.k]=a))};if(a){const W=()=>{B(),xi.delete(e)};W.id=-1,xi.set(e,W),me(W,n)}else Lc(e),B()}}}function Lc(e){const t=xi.get(e);t&&(t.flags|=8,xi.delete(e))}so().requestIdleCallback;so().cancelIdleCallback;const yr=e=>!!e.type.__asyncLoader,sf=e=>e.type.__isKeepAlive;function Kg(e,t){of(e,"a",t)}function Wg(e,t){of(e,"da",t)}function of(e,t,n=oe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(lo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)sf(s.parent.vnode)&&Gg(r,t,n,s),s=s.parent}}function Gg(e,t,n,r){const s=lo(t,e,r,!0);af(()=>{za(r[t],s)},n)}function lo(e,t,n=oe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ye();const l=qs(n),u=$e(t,n,e,a);return l(),Je(),u});return r?s.unshift(i):s.push(i),i}}const rn=e=>(t,n=oe)=>{(!Vs||e==="sp")&&lo(e,(...r)=>t(...r),n)},Qg=rn("bm"),Xg=rn("m"),Yg=rn("bu"),Jg=rn("u"),Zg=rn("bum"),af=rn("um"),tm=rn("sp"),em=rn("rtg"),nm=rn("rtc");function rm(e,t=oe){lo("ec",e,t)}const sm="components";function im(e,t){return am(sm,e,!0,t)||e}const om=Symbol.for("v-ndc");function am(e,t,n=!0,r=!1){const s=Yt||oe;if(s){const i=s.type;{const l=Xm(i,!1);if(l&&(l===t||l===Ae(t)||l===no(Ae(t))))return i}const a=Fc(s[e]||i[e],t)||Fc(s.appContext[e],t);return!a&&r?i:a}}function Fc(e,t){return e&&(e[t]||e[Ae(t)]||e[no(Ae(t))])}function gn(e,t,n,r){let s;const i=n,a=et(e);if(a||Bt(e)){const l=a&&vn(e);let u=!1,f=!1;l&&(u=!we(e),f=Sn(e),e=io(e)),s=new Array(e.length);for(let d=0,g=e.length;d<g;d++)s[d]=t(u?f?Pi(Qt(e[d])):Qt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(St(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=t(e[d],d,u,i)}}else s=[];return s}function yi(e,t,n={},r,s){if(Yt.ce||Yt.parent&&yr(Yt.parent)&&Yt.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),pt(),mn(Ot,null,[ye("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),pt();const a=i&&lf(i(n)),l=n.key||a&&a.key,u=mn(Ot,{key:(l&&!Ce(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function lf(e){return e.some(t=>al(t)?!(t.type===Ze||t.type===Ot&&!lf(t.children)):!0)?e:null}const fa=e=>e?Pf(e)?ho(e):fa(e.parent):null,ms=ae(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fa(e.parent),$root:e=>fa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>uf(e),$forceUpdate:e=>e.f||(e.f=()=>{rl(e.update)}),$nextTick:e=>e.n||(e.n=nl.bind(e.proxy)),$watch:e=>Vm.bind(e)}),Ko=(e,t)=>e!==wt&&!e.__isScriptSetup&&_t(e,t),lm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const S=a[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Ko(r,t))return a[t]=1,r[t];if(s!==wt&&_t(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&_t(f,t))return a[t]=3,i[t];if(n!==wt&&_t(n,t))return a[t]=4,n[t];da&&(a[t]=0)}}const d=ms[t];let g,v;if(d)return t==="$attrs"&&se(e.attrs,"get",""),d(e);if((g=l.__cssModules)&&(g=g[t]))return g;if(n!==wt&&_t(n,t))return a[t]=4,n[t];if(v=u.config.globalProperties,_t(v,t))return v[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Ko(s,t)?(s[t]=n,!0):r!==wt&&_t(r,t)?(r[t]=n,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||e!==wt&&l[0]!=="$"&&_t(e,l)||Ko(t,l)||(u=i[0])&&_t(u,l)||_t(r,l)||_t(ms,l)||_t(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:_t(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Uc(e){return et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let da=!0;function cm(e){const t=uf(e),n=e.proxy,r=e.ctx;da=!1,t.beforeCreate&&Bc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:g,mounted:v,beforeUpdate:S,updated:x,activated:U,deactivated:B,beforeDestroy:W,beforeUnmount:G,destroyed:Q,unmounted:K,render:rt,renderTracked:Et,renderTriggered:w,errorCaptured:m,serverPrefetch:_,expose:I,inheritAttrs:T,components:b,directives:y,filters:kt}=t;if(f&&um(f,r,null),a)for(const at in a){const mt=a[at];it(mt)&&(r[at]=mt.bind(n))}if(s){const at=s.call(n,n);St(at)&&(e.data=oo(at))}if(da=!0,i)for(const at in i){const mt=i[at],ve=it(mt)?mt.bind(n,n):it(mt.get)?mt.get.bind(n,n):Le,er=!it(mt)&&it(mt.set)?mt.set.bind(n):Le,Ve=Es({get:ve,set:er});Object.defineProperty(r,at,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:fe=>Ve.value=fe})}if(l)for(const at in l)cf(l[at],r,n,at);if(u){const at=it(u)?u.call(n):u;Reflect.ownKeys(at).forEach(mt=>{mm(mt,at[mt])})}d&&Bc(d,e,"c");function Vt(at,mt){et(mt)?mt.forEach(ve=>at(ve.bind(n))):mt&&at(mt.bind(n))}if(Vt(Qg,g),Vt(Xg,v),Vt(Yg,S),Vt(Jg,x),Vt(Kg,U),Vt(Wg,B),Vt(rm,m),Vt(nm,Et),Vt(em,w),Vt(Zg,G),Vt(af,K),Vt(tm,_),et(I))if(I.length){const at=e.exposed||(e.exposed={});I.forEach(mt=>{Object.defineProperty(at,mt,{get:()=>n[mt],set:ve=>n[mt]=ve,enumerable:!0})})}else e.exposed||(e.exposed={});rt&&e.render===Le&&(e.render=rt),T!=null&&(e.inheritAttrs=T),b&&(e.components=b),y&&(e.directives=y),_&&rf(e)}function um(e,t,n=Le){et(e)&&(e=pa(e));for(const r in e){const s=e[r];let i;St(s)?"default"in s?i=_s(s.from||r,s.default,!0):i=_s(s.from||r):i=_s(s),Mt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Bc(e,t,n){$e(et(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function cf(e,t,n,r){let s=r.includes(".")?wf(n,r):()=>n[r];if(Bt(e)){const i=t[e];it(i)&&Ei(s,i)}else if(it(e))Ei(s,e.bind(n));else if(St(e))if(et(e))e.forEach(i=>cf(i,t,n,r));else{const i=it(e.handler)?e.handler.bind(n):t[e.handler];it(i)&&Ei(s,i,e)}}function uf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>Oi(u,f,a,!0)),Oi(u,t,a)),St(t)&&i.set(t,u),u}function Oi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Oi(e,i,n,!0),s&&s.forEach(a=>Oi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=hm[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const hm={data:jc,props:$c,emits:$c,methods:ls,computed:ls,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:ls,directives:ls,watch:dm,provide:jc,inject:fm};function jc(e,t){return t?e?function(){return ae(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function fm(e,t){return ls(pa(e),pa(t))}function pa(e){if(et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function ls(e,t){return e?ae(Object.create(null),e,t):t}function $c(e,t){return e?et(e)&&et(t)?[...new Set([...e,...t])]:ae(Object.create(null),Uc(e),Uc(t??{})):t}function dm(e,t){if(!e)return t;if(!t)return e;const n=ae(Object.create(null),e);for(const r in t)n[r]=ce(e[r],t[r]);return n}function hf(){return{app:null,config:{isNativeTag:bh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pm=0;function gm(e,t){return function(r,s=null){it(r)||(r=ae({},r)),s!=null&&!St(s)&&(s=null);const i=hf(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:pm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Jm,get config(){return i.config},set config(d){},use(d,...g){return a.has(d)||(d&&it(d.install)?(a.add(d),d.install(f,...g)):it(d)&&(a.add(d),d(f,...g))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,g){return g?(i.components[d]=g,f):i.components[d]},directive(d,g){return g?(i.directives[d]=g,f):i.directives[d]},mount(d,g,v){if(!u){const S=f._ceVNode||ye(r,s);return S.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),e(S,d,v),u=!0,f._container=d,d.__vue_app__=f,ho(S.component)}},onUnmount(d){l.push(d)},unmount(){u&&($e(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,g){return i.provides[d]=g,f},runWithContext(d){const g=Gn;Gn=f;try{return d()}finally{Gn=g}}};return f}}let Gn=null;function mm(e,t){if(oe){let n=oe.provides;const r=oe.parent&&oe.parent.provides;r===n&&(n=oe.provides=Object.create(r)),n[e]=t}}function _s(e,t,n=!1){const r=Cf();if(r||Gn){let s=Gn?Gn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}function _m(){return!!(Cf()||Gn)}const ff={},df=()=>Object.create(ff),pf=e=>Object.getPrototypeOf(e)===ff;function ym(e,t,n,r=!1){const s={},i=df();e.propsDefaults=Object.create(null),gf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Cg(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Em(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=gt(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let g=0;g<d.length;g++){let v=d[g];if(co(e.emitsOptions,v))continue;const S=t[v];if(u)if(_t(i,v))S!==i[v]&&(i[v]=S,f=!0);else{const x=Ae(v);s[x]=ga(u,l,x,S,e,!1)}else S!==i[v]&&(i[v]=S,f=!0)}}}else{gf(e,t,s,i)&&(f=!0);let d;for(const g in l)(!t||!_t(t,g)&&((d=xn(g))===g||!_t(t,d)))&&(u?n&&(n[g]!==void 0||n[d]!==void 0)&&(s[g]=ga(u,l,g,void 0,e,!0)):delete s[g]);if(i!==l)for(const g in i)(!t||!_t(t,g))&&(delete i[g],f=!0)}f&&We(e.attrs,"set","")}function gf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(fs(u))continue;const f=t[u];let d;s&&_t(s,d=Ae(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:co(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=gt(n),f=l||wt;for(let d=0;d<i.length;d++){const g=i[d];n[g]=ga(s,u,g,f[g],e,!_t(f,g))}}return a}function ga(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=_t(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&it(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=qs(s);r=f[n]=u.call(null,t),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===xn(n))&&(r=!0))}return r}const vm=new WeakMap;function mf(e,t,n=!1){const r=n?vm:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!it(e)){const d=g=>{u=!0;const[v,S]=mf(g,t,!0);ae(a,v),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!u)return St(e)&&r.set(e,gr),gr;if(et(i))for(let d=0;d<i.length;d++){const g=Ae(i[d]);qc(g)&&(a[g]=wt)}else if(i)for(const d in i){const g=Ae(d);if(qc(g)){const v=i[d],S=a[g]=et(v)||it(v)?{type:v}:ae({},v),x=S.type;let U=!1,B=!0;if(et(x))for(let W=0;W<x.length;++W){const G=x[W],Q=it(G)&&G.name;if(Q==="Boolean"){U=!0;break}else Q==="String"&&(B=!1)}else U=it(x)&&x.name==="Boolean";S[0]=U,S[1]=B,(U||_t(S,"default"))&&l.push(g)}}const f=[a,l];return St(e)&&r.set(e,f),f}function qc(e){return e[0]!=="$"&&!fs(e)}const il=e=>e==="_"||e==="_ctx"||e==="$stable",ol=e=>et(e)?e.map(ke):[ke(e)],Tm=(e,t,n)=>{if(t._n)return t;const r=as((...s)=>ol(t(...s)),n);return r._c=!1,r},_f=(e,t,n)=>{const r=e._ctx;for(const s in e){if(il(s))continue;const i=e[s];if(it(i))t[s]=Tm(s,i,r);else if(i!=null){const a=ol(i);t[s]=()=>a}}},yf=(e,t)=>{const n=ol(t);e.slots.default=()=>n},Ef=(e,t,n)=>{for(const r in t)(n||!il(r))&&(e[r]=t[r])},Im=(e,t,n)=>{const r=e.slots=df();if(e.vnode.shapeFlag&32){const s=t._;s?(Ef(r,t,n),n&&Ph(r,"_",s,!0)):_f(t,r)}else t&&yf(e,t)},wm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=wt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Ef(s,t,n):(i=!t.$stable,_f(t,s)),a=t}else t&&(yf(e,t),a={default:1});if(i)for(const l in s)!il(l)&&a[l]==null&&delete s[l]},me=Fm;function Am(e){return bm(e)}function bm(e,t){const n=so();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:g,nextSibling:v,setScopeId:S=Le,insertStaticContent:x}=e,U=(E,A,P,F=null,N=null,O=null,$=void 0,L=null,k=!!A.dynamicChildren)=>{if(E===A)return;E&&!os(E,A)&&(F=sn(E),fe(E,N,O,!0),E=null),A.patchFlag===-2&&(k=!1,A.dynamicChildren=null);const{type:M,ref:J,shapeFlag:q}=A;switch(M){case uo:B(E,A,P,F);break;case Ze:W(E,A,P,F);break;case Go:E==null&&G(A,P,F,$);break;case Ot:b(E,A,P,F,N,O,$,L,k);break;default:q&1?rt(E,A,P,F,N,O,$,L,k):q&6?y(E,A,P,F,N,O,$,L,k):(q&64||q&128)&&M.process(E,A,P,F,N,O,$,L,k,kn)}J!=null&&N?gs(J,E&&E.ref,O,A||E,!A):J==null&&E&&E.ref!=null&&gs(E.ref,null,O,E,!0)},B=(E,A,P,F)=>{if(E==null)r(A.el=l(A.children),P,F);else{const N=A.el=E.el;A.children!==E.children&&f(N,A.children)}},W=(E,A,P,F)=>{E==null?r(A.el=u(A.children||""),P,F):A.el=E.el},G=(E,A,P,F)=>{[E.el,E.anchor]=x(E.children,A,P,F,E.el,E.anchor)},Q=({el:E,anchor:A},P,F)=>{let N;for(;E&&E!==A;)N=v(E),r(E,P,F),E=N;r(A,P,F)},K=({el:E,anchor:A})=>{let P;for(;E&&E!==A;)P=v(E),s(E),E=P;s(A)},rt=(E,A,P,F,N,O,$,L,k)=>{if(A.type==="svg"?$="svg":A.type==="math"&&($="mathml"),E==null)Et(A,P,F,N,O,$,L,k);else{const M=E.el&&E.el._isVueCE?E.el:null;try{M&&M._beginPatch(),_(E,A,N,O,$,L,k)}finally{M&&M._endPatch()}}},Et=(E,A,P,F,N,O,$,L)=>{let k,M;const{props:J,shapeFlag:q,transition:Y,dirs:Z}=E;if(k=E.el=a(E.type,O,J&&J.is,J),q&8?d(k,E.children):q&16&&m(E.children,k,null,F,N,Wo(E,O),$,L),Z&&$n(E,null,F,"created"),w(k,E,E.scopeId,$,F),J){for(const vt in J)vt!=="value"&&!fs(vt)&&i(k,vt,null,J[vt],O,F);"value"in J&&i(k,"value",null,J.value,O),(M=J.onVnodeBeforeMount)&&xe(M,F,E)}Z&&$n(E,null,F,"beforeMount");const lt=Sm(N,Y);lt&&Y.beforeEnter(k),r(k,A,P),((M=J&&J.onVnodeMounted)||lt||Z)&&me(()=>{M&&xe(M,F,E),lt&&Y.enter(k),Z&&$n(E,null,F,"mounted")},N)},w=(E,A,P,F,N)=>{if(P&&S(E,P),F)for(let O=0;O<F.length;O++)S(E,F[O]);if(N){let O=N.subTree;if(A===O||bf(O.type)&&(O.ssContent===A||O.ssFallback===A)){const $=N.vnode;w(E,$,$.scopeId,$.slotScopeIds,N.parent)}}},m=(E,A,P,F,N,O,$,L,k=0)=>{for(let M=k;M<E.length;M++){const J=E[M]=L?pn(E[M]):ke(E[M]);U(null,J,A,P,F,N,O,$,L)}},_=(E,A,P,F,N,O,$)=>{const L=A.el=E.el;let{patchFlag:k,dynamicChildren:M,dirs:J}=A;k|=E.patchFlag&16;const q=E.props||wt,Y=A.props||wt;let Z;if(P&&qn(P,!1),(Z=Y.onVnodeBeforeUpdate)&&xe(Z,P,A,E),J&&$n(A,E,P,"beforeUpdate"),P&&qn(P,!0),(q.innerHTML&&Y.innerHTML==null||q.textContent&&Y.textContent==null)&&d(L,""),M?I(E.dynamicChildren,M,L,P,F,Wo(A,N),O):$||mt(E,A,L,null,P,F,Wo(A,N),O,!1),k>0){if(k&16)T(L,q,Y,P,N);else if(k&2&&q.class!==Y.class&&i(L,"class",null,Y.class,N),k&4&&i(L,"style",q.style,Y.style,N),k&8){const lt=A.dynamicProps;for(let vt=0;vt<lt.length;vt++){const dt=lt[vt],Zt=q[dt],te=Y[dt];(te!==Zt||dt==="value")&&i(L,dt,Zt,te,N,P)}}k&1&&E.children!==A.children&&d(L,A.children)}else!$&&M==null&&T(L,q,Y,P,N);((Z=Y.onVnodeUpdated)||J)&&me(()=>{Z&&xe(Z,P,A,E),J&&$n(A,E,P,"updated")},F)},I=(E,A,P,F,N,O,$)=>{for(let L=0;L<A.length;L++){const k=E[L],M=A[L],J=k.el&&(k.type===Ot||!os(k,M)||k.shapeFlag&198)?g(k.el):P;U(k,M,J,null,F,N,O,$,!0)}},T=(E,A,P,F,N)=>{if(A!==P){if(A!==wt)for(const O in A)!fs(O)&&!(O in P)&&i(E,O,A[O],null,N,F);for(const O in P){if(fs(O))continue;const $=P[O],L=A[O];$!==L&&O!=="value"&&i(E,O,L,$,N,F)}"value"in P&&i(E,"value",A.value,P.value,N)}},b=(E,A,P,F,N,O,$,L,k)=>{const M=A.el=E?E.el:l(""),J=A.anchor=E?E.anchor:l("");let{patchFlag:q,dynamicChildren:Y,slotScopeIds:Z}=A;Z&&(L=L?L.concat(Z):Z),E==null?(r(M,P,F),r(J,P,F),m(A.children||[],P,J,N,O,$,L,k)):q>0&&q&64&&Y&&E.dynamicChildren?(I(E.dynamicChildren,Y,P,N,O,$,L),(A.key!=null||N&&A===N.subTree)&&vf(E,A,!0)):mt(E,A,P,J,N,O,$,L,k)},y=(E,A,P,F,N,O,$,L,k)=>{A.slotScopeIds=L,E==null?A.shapeFlag&512?N.ctx.activate(A,P,F,$,k):kt(A,P,F,N,O,$,k):Ee(E,A,k)},kt=(E,A,P,F,N,O,$)=>{const L=E.component=zm(E,F,N);if(sf(E)&&(L.ctx.renderer=kn),Km(L,!1,$),L.asyncDep){if(N&&N.registerDep(L,Vt,$),!E.el){const k=L.subTree=ye(Ze);W(null,k,A,P),E.placeholder=k.el}}else Vt(L,E,A,P,N,O,$)},Ee=(E,A,P)=>{const F=A.component=E.component;if(km(E,A,P))if(F.asyncDep&&!F.asyncResolved){at(F,A,P);return}else F.next=A,F.update();else A.el=E.el,F.vnode=A},Vt=(E,A,P,F,N,O,$)=>{const L=()=>{if(E.isMounted){let{next:q,bu:Y,u:Z,parent:lt,vnode:vt}=E;{const pe=Tf(E);if(pe){q&&(q.el=vt.el,at(E,q,$)),pe.asyncDep.then(()=>{E.isUnmounted||L()});return}}let dt=q,Zt;qn(E,!1),q?(q.el=vt.el,at(E,q,$)):q=vt,Y&&_i(Y),(Zt=q.props&&q.props.onVnodeBeforeUpdate)&&xe(Zt,lt,q,vt),qn(E,!0);const te=zc(E),de=E.subTree;E.subTree=te,U(de,te,g(de.el),sn(de),E,N,O),q.el=te.el,dt===null&&Lm(E,te.el),Z&&me(Z,N),(Zt=q.props&&q.props.onVnodeUpdated)&&me(()=>xe(Zt,lt,q,vt),N)}else{let q;const{el:Y,props:Z}=A,{bm:lt,m:vt,parent:dt,root:Zt,type:te}=E,de=yr(A);qn(E,!1),lt&&_i(lt),!de&&(q=Z&&Z.onVnodeBeforeMount)&&xe(q,dt,A),qn(E,!0);{Zt.ce&&Zt.ce._def.shadowRoot!==!1&&Zt.ce._injectChildStyle(te);const pe=E.subTree=zc(E);U(null,pe,P,F,E,N,O),A.el=pe.el}if(vt&&me(vt,N),!de&&(q=Z&&Z.onVnodeMounted)){const pe=A;me(()=>xe(q,dt,pe),N)}(A.shapeFlag&256||dt&&yr(dt.vnode)&&dt.vnode.shapeFlag&256)&&E.a&&me(E.a,N),E.isMounted=!0,A=P=F=null}};E.scope.on();const k=E.effect=new kh(L);E.scope.off();const M=E.update=k.run.bind(k),J=E.job=k.runIfDirty.bind(k);J.i=E,J.id=E.uid,k.scheduler=()=>rl(J),qn(E,!0),M()},at=(E,A,P)=>{A.component=E;const F=E.vnode.props;E.vnode=A,E.next=null,Em(E,A.props,F,P),wm(E,A.children,P),Ye(),kc(E),Je()},mt=(E,A,P,F,N,O,$,L,k=!1)=>{const M=E&&E.children,J=E?E.shapeFlag:0,q=A.children,{patchFlag:Y,shapeFlag:Z}=A;if(Y>0){if(Y&128){er(M,q,P,F,N,O,$,L,k);return}else if(Y&256){ve(M,q,P,F,N,O,$,L,k);return}}Z&8?(J&16&&He(M,N,O),q!==M&&d(P,q)):J&16?Z&16?er(M,q,P,F,N,O,$,L,k):He(M,N,O,!0):(J&8&&d(P,""),Z&16&&m(q,P,F,N,O,$,L,k))},ve=(E,A,P,F,N,O,$,L,k)=>{E=E||gr,A=A||gr;const M=E.length,J=A.length,q=Math.min(M,J);let Y;for(Y=0;Y<q;Y++){const Z=A[Y]=k?pn(A[Y]):ke(A[Y]);U(E[Y],Z,P,null,N,O,$,L,k)}M>J?He(E,N,O,!0,!1,q):m(A,P,F,N,O,$,L,k,q)},er=(E,A,P,F,N,O,$,L,k)=>{let M=0;const J=A.length;let q=E.length-1,Y=J-1;for(;M<=q&&M<=Y;){const Z=E[M],lt=A[M]=k?pn(A[M]):ke(A[M]);if(os(Z,lt))U(Z,lt,P,null,N,O,$,L,k);else break;M++}for(;M<=q&&M<=Y;){const Z=E[q],lt=A[Y]=k?pn(A[Y]):ke(A[Y]);if(os(Z,lt))U(Z,lt,P,null,N,O,$,L,k);else break;q--,Y--}if(M>q){if(M<=Y){const Z=Y+1,lt=Z<J?A[Z].el:F;for(;M<=Y;)U(null,A[M]=k?pn(A[M]):ke(A[M]),P,lt,N,O,$,L,k),M++}}else if(M>Y)for(;M<=q;)fe(E[M],N,O,!0),M++;else{const Z=M,lt=M,vt=new Map;for(M=lt;M<=Y;M++){const Wt=A[M]=k?pn(A[M]):ke(A[M]);Wt.key!=null&&vt.set(Wt.key,M)}let dt,Zt=0;const te=Y-lt+1;let de=!1,pe=0;const be=new Array(te);for(M=0;M<te;M++)be[M]=0;for(M=Z;M<=q;M++){const Wt=E[M];if(Zt>=te){fe(Wt,N,O,!0);continue}let qt;if(Wt.key!=null)qt=vt.get(Wt.key);else for(dt=lt;dt<=Y;dt++)if(be[dt-lt]===0&&os(Wt,A[dt])){qt=dt;break}qt===void 0?fe(Wt,N,O,!0):(be[qt-lt]=M+1,qt>=pe?pe=qt:de=!0,U(Wt,A[qt],P,null,N,O,$,L,k),Zt++)}const rr=de?Rm(be):gr;for(dt=rr.length-1,M=te-1;M>=0;M--){const Wt=lt+M,qt=A[Wt],qr=A[Wt+1],Ln=Wt+1<J?qr.el||qr.placeholder:F;be[M]===0?U(null,qt,P,Ln,N,O,$,L,k):de&&(dt<0||M!==rr[dt]?Ve(qt,P,Ln,2):dt--)}}},Ve=(E,A,P,F,N=null)=>{const{el:O,type:$,transition:L,children:k,shapeFlag:M}=E;if(M&6){Ve(E.component.subTree,A,P,F);return}if(M&128){E.suspense.move(A,P,F);return}if(M&64){$.move(E,A,P,kn);return}if($===Ot){r(O,A,P);for(let q=0;q<k.length;q++)Ve(k[q],A,P,F);r(E.anchor,A,P);return}if($===Go){Q(E,A,P);return}if(F!==2&&M&1&&L)if(F===0)L.beforeEnter(O),r(O,A,P),me(()=>L.enter(O),N);else{const{leave:q,delayLeave:Y,afterLeave:Z}=L,lt=()=>{E.ctx.isUnmounted?s(O):r(O,A,P)},vt=()=>{O._isLeaving&&O[zg](!0),q(O,()=>{lt(),Z&&Z()})};Y?Y(O,lt,vt):vt()}else r(O,A,P)},fe=(E,A,P,F=!1,N=!1)=>{const{type:O,props:$,ref:L,children:k,dynamicChildren:M,shapeFlag:J,patchFlag:q,dirs:Y,cacheIndex:Z}=E;if(q===-2&&(N=!1),L!=null&&(Ye(),gs(L,null,P,E,!0),Je()),Z!=null&&(A.renderCache[Z]=void 0),J&256){A.ctx.deactivate(E);return}const lt=J&1&&Y,vt=!yr(E);let dt;if(vt&&(dt=$&&$.onVnodeBeforeUnmount)&&xe(dt,A,E),J&6)jr(E.component,P,F);else{if(J&128){E.suspense.unmount(P,F);return}lt&&$n(E,null,A,"beforeUnmount"),J&64?E.type.remove(E,A,P,kn,F):M&&!M.hasOnce&&(O!==Ot||q>0&&q&64)?He(M,A,P,!1,!0):(O===Ot&&q&384||!N&&J&16)&&He(k,A,P),F&&Br(E)}(vt&&(dt=$&&$.onVnodeUnmounted)||lt)&&me(()=>{dt&&xe(dt,A,E),lt&&$n(E,null,A,"unmounted")},P)},Br=E=>{const{type:A,el:P,anchor:F,transition:N}=E;if(A===Ot){nr(P,F);return}if(A===Go){K(E);return}const O=()=>{s(P),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(E.shapeFlag&1&&N&&!N.persisted){const{leave:$,delayLeave:L}=N,k=()=>$(P,O);L?L(E.el,O,k):k()}else O()},nr=(E,A)=>{let P;for(;E!==A;)P=v(E),s(E),E=P;s(A)},jr=(E,A,P)=>{const{bum:F,scope:N,job:O,subTree:$,um:L,m:k,a:M}=E;Hc(k),Hc(M),F&&_i(F),N.stop(),O&&(O.flags|=8,fe($,E,A,P)),L&&me(L,A),me(()=>{E.isUnmounted=!0},A)},He=(E,A,P,F=!1,N=!1,O=0)=>{for(let $=O;$<E.length;$++)fe(E[$],A,P,F,N)},sn=E=>{if(E.shapeFlag&6)return sn(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const A=v(E.anchor||E.el),P=A&&A[qg];return P?v(P):A};let Mn=!1;const $r=(E,A,P)=>{E==null?A._vnode&&fe(A._vnode,null,null,!0):U(A._vnode||null,E,A,null,null,null,P),A._vnode=E,Mn||(Mn=!0,kc(),tf(),Mn=!1)},kn={p:U,um:fe,m:Ve,r:Br,mt:kt,mc:m,pc:mt,pbc:I,n:sn,o:e};return{render:$r,hydrate:void 0,createApp:gm($r)}}function Wo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function qn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Sm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function vf(e,t,n=!1){const r=e.children,s=t.children;if(et(r)&&et(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=pn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&vf(a,l)),l.type===uo&&l.patchFlag!==-1&&(l.el=a.el),l.type===Ze&&!l.el&&(l.el=a.el)}}function Rm(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Tf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Tf(t)}function Hc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Cm=Symbol.for("v-scx"),Pm=()=>_s(Cm);function Ei(e,t,n){return If(e,t,n)}function If(e,t,n=wt){const{immediate:r,deep:s,flush:i,once:a}=n,l=ae({},n),u=t&&r||!t&&i!=="post";let f;if(Vs){if(i==="sync"){const S=Pm();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!u){const S=()=>{};return S.stop=Le,S.resume=Le,S.pause=Le,S}}const d=oe;l.call=(S,x,U)=>$e(S,d,x,U);let g=!1;i==="post"?l.scheduler=S=>{me(S,d&&d.suspense)}:i!=="sync"&&(g=!0,l.scheduler=(S,x)=>{x?S():rl(S)}),l.augmentJob=S=>{t&&(S.flags|=4),g&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const v=Ug(e,t,l);return Vs&&(f?f.push(v):u&&v()),v}function Vm(e,t,n){const r=this.proxy,s=Bt(e)?e.includes(".")?wf(r,e):()=>r[e]:e.bind(r,r);let i;it(t)?i=t:(i=t.handler,n=t);const a=qs(this),l=If(s,i.bind(r),n);return a(),l}function wf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Dm=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ae(t)}Modifiers`]||e[`${xn(t)}Modifiers`];function Nm(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||wt;let s=n;const i=t.startsWith("update:"),a=i&&Dm(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Bt(d)?d.trim():d)),a.number&&(s=n.map(ro)));let l,u=r[l=jo(t)]||r[l=jo(Ae(t))];!u&&i&&(u=r[l=jo(xn(t))]),u&&$e(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,$e(f,e,6,s)}}const xm=new WeakMap;function Af(e,t,n=!1){const r=n?xm:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!it(e)){const u=f=>{const d=Af(f,t,!0);d&&(l=!0,ae(a,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(St(e)&&r.set(e,null),null):(et(i)?i.forEach(u=>a[u]=null):ae(a,i),St(e)&&r.set(e,a),a)}function co(e,t){return!e||!Zi(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,xn(t))||_t(e,t))}function zc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:g,data:v,setupState:S,ctx:x,inheritAttrs:U}=e,B=Ni(e);let W,G;try{if(n.shapeFlag&4){const K=s||r,rt=K;W=ke(f.call(rt,K,d,g,S,v,x)),G=l}else{const K=t;W=ke(K.length>1?K(g,{attrs:l,slots:a,emit:u}):K(g,null)),G=t.props?l:Om(l)}}catch(K){ys.length=0,ao(K,e,1),W=ye(Ze)}let Q=W;if(G&&U!==!1){const K=Object.keys(G),{shapeFlag:rt}=Q;K.length&&rt&7&&(i&&K.some(Ha)&&(G=Mm(G,i)),Q=Ar(Q,G,!1,!0))}return n.dirs&&(Q=Ar(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&sl(Q,n.transition),W=Q,Ni(B),W}const Om=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zi(n))&&((t||(t={}))[n]=e[n]);return t},Mm=(e,t)=>{const n={};for(const r in e)(!Ha(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function km(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Kc(r,a,f):!!a;if(u&8){const d=t.dynamicProps;for(let g=0;g<d.length;g++){const v=d[g];if(a[v]!==r[v]&&!co(f,v))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Kc(r,a,f):!0:!!a;return!1}function Kc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!co(n,i))return!0}return!1}function Lm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const bf=e=>e.__isSuspense;function Fm(e,t){t&&t.pendingBranch?et(e)?t.effects.push(...e):t.effects.push(e):$g(e)}const Ot=Symbol.for("v-fgt"),uo=Symbol.for("v-txt"),Ze=Symbol.for("v-cmt"),Go=Symbol.for("v-stc"),ys=[];let _e=null;function pt(e=!1){ys.push(_e=e?null:[])}function Um(){ys.pop(),_e=ys[ys.length-1]||null}let Ps=1;function Wc(e,t=!1){Ps+=e,e<0&&_e&&t&&(_e.hasOnce=!0)}function Sf(e){return e.dynamicChildren=Ps>0?_e||gr:null,Um(),Ps>0&&_e&&_e.push(e),e}function Ct(e,t,n,r,s,i){return Sf(It(e,t,n,r,s,i,!0))}function mn(e,t,n,r,s){return Sf(ye(e,t,n,r,s,!0))}function al(e){return e?e.__v_isVNode===!0:!1}function os(e,t){return e.type===t.type&&e.key===t.key}const Rf=({key:e})=>e??null,vi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||Mt(e)||it(e)?{i:Yt,r:e,k:t,f:!!n}:e:null);function It(e,t=null,n=null,r=0,s=null,i=e===Ot?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Rf(t),ref:t&&vi(t),scopeId:nf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Yt};return l?(ll(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Bt(n)?8:16),Ps>0&&!a&&_e&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&_e.push(u),u}const ye=Bm;function Bm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===om)&&(e=Ze),al(e)){const l=Ar(e,t,!0);return n&&ll(l,n),Ps>0&&!i&&_e&&(l.shapeFlag&6?_e[_e.indexOf(e)]=l:_e.push(l)),l.patchFlag=-2,l}if(Ym(e)&&(e=e.__vccOpts),t){t=jm(t);let{class:l,style:u}=t;l&&!Bt(l)&&(t.class=Wa(l)),St(u)&&(tl(u)&&!et(u)&&(u=ae({},u)),t.style=xr(u))}const a=Bt(e)?1:bf(e)?128:Hg(e)?64:St(e)?4:it(e)?2:0;return It(e,t,n,r,s,a,i,!0)}function jm(e){return e?tl(e)||pf(e)?ae({},e):e:null}function Ar(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?$m(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Rf(f),ref:t&&t.ref?n&&i?et(i)?i.concat(vi(t)):[i,vi(t)]:vi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ot?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ar(e.ssContent),ssFallback:e.ssFallback&&Ar(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&sl(d,u.clone(d)),d}function ma(e=" ",t=0){return ye(uo,null,e,t)}function Gc(e="",t=!1){return t?(pt(),mn(Ze,null,e)):ye(Ze,null,e)}function ke(e){return e==null||typeof e=="boolean"?ye(Ze):et(e)?ye(Ot,null,e.slice()):al(e)?pn(e):ye(uo,null,String(e))}function pn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ar(e)}function ll(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(et(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ll(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!pf(t)?t._ctx=Yt:s===3&&Yt&&(Yt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:Yt},n=32):(t=String(t),r&64?(n=16,t=[ma(t)]):n=8);e.children=t,e.shapeFlag|=n}function $m(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Wa([t.class,r.class]));else if(s==="style")t.style=xr([t.style,r.style]);else if(Zi(s)){const i=t[s],a=r[s];a&&i!==a&&!(et(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function xe(e,t,n,r=null){$e(e,t,7,[n,r])}const qm=hf();let Hm=0;function zm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||qm,i={uid:Hm++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mf(r,s),emitsOptions:Af(r,s),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Nm.bind(null,i),e.ce&&e.ce(i),i}let oe=null;const Cf=()=>oe||Yt;let Mi,_a;{const e=so(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Mi=t("__VUE_INSTANCE_SETTERS__",n=>oe=n),_a=t("__VUE_SSR_SETTERS__",n=>Vs=n)}const qs=e=>{const t=oe;return Mi(e),e.scope.on(),()=>{e.scope.off(),Mi(t)}},Qc=()=>{oe&&oe.scope.off(),Mi(null)};function Pf(e){return e.vnode.shapeFlag&4}let Vs=!1;function Km(e,t=!1,n=!1){t&&_a(t);const{props:r,children:s}=e.vnode,i=Pf(e);ym(e,r,i,t),Im(e,s,n||t);const a=i?Wm(e,t):void 0;return t&&_a(!1),a}function Wm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,lm);const{setup:r}=n;if(r){Ye();const s=e.setupContext=r.length>1?Qm(e):null,i=qs(e),a=js(r,e,0,[e.props,s]),l=Sh(a);if(Je(),i(),(l||e.sp)&&!yr(e)&&rf(e),l){if(a.then(Qc,Qc),t)return a.then(u=>{Xc(e,u)}).catch(u=>{ao(u,e,0)});e.asyncDep=a}else Xc(e,a)}else Vf(e)}function Xc(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:St(t)&&(e.setupState=Yh(t)),Vf(e)}function Vf(e,t,n){const r=e.type;e.render||(e.render=r.render||Le);{const s=qs(e);Ye();try{cm(e)}finally{Je(),s()}}}const Gm={get(e,t){return se(e,"get",""),e[t]}};function Qm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Gm),slots:e.slots,emit:e.emit,expose:t}}function ho(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Yh(el(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ms)return ms[n](e)},has(t,n){return n in t||n in ms}})):e.proxy}function Xm(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function Ym(e){return it(e)&&"__vccOpts"in e}const Es=(e,t)=>Lg(e,t,Vs),Jm="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ya;const Yc=typeof window<"u"&&window.trustedTypes;if(Yc)try{ya=Yc.createPolicy("vue",{createHTML:e=>e})}catch{}const Df=ya?e=>ya.createHTML(e):e=>e,Zm="http://www.w3.org/2000/svg",t_="http://www.w3.org/1998/Math/MathML",Ke=typeof document<"u"?document:null,Jc=Ke&&Ke.createElement("template"),e_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Ke.createElementNS(Zm,e):t==="mathml"?Ke.createElementNS(t_,e):n?Ke.createElement(e,{is:n}):Ke.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Ke.createTextNode(e),createComment:e=>Ke.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ke.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Jc.innerHTML=Df(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Jc.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},n_=Symbol("_vtc");function r_(e,t,n){const r=e[n_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Zc=Symbol("_vod"),s_=Symbol("_vsh"),i_=Symbol(""),o_=/(?:^|;)\s*display\s*:/;function a_(e,t,n){const r=e.style,s=Bt(n);let i=!1;if(n&&!s){if(t)if(Bt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ti(r,l,"")}else for(const a in t)n[a]==null&&Ti(r,a,"");for(const a in n)a==="display"&&(i=!0),Ti(r,a,n[a])}else if(s){if(t!==n){const a=r[i_];a&&(n+=";"+a),r.cssText=n,i=o_.test(n)}}else t&&e.removeAttribute("style");Zc in e&&(e[Zc]=i?r.display:"",e[s_]&&(r.display="none"))}const tu=/\s*!important$/;function Ti(e,t,n){if(et(n))n.forEach(r=>Ti(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=l_(e,t);tu.test(n)?e.setProperty(xn(r),n.replace(tu,""),"important"):e[r]=n}}const eu=["Webkit","Moz","ms"],Qo={};function l_(e,t){const n=Qo[t];if(n)return n;let r=Ae(t);if(r!=="filter"&&r in e)return Qo[t]=r;r=no(r);for(let s=0;s<eu.length;s++){const i=eu[s]+r;if(i in e)return Qo[t]=i}return t}const nu="http://www.w3.org/1999/xlink";function ru(e,t,n,r,s,i=ig(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(nu,t.slice(6,t.length)):e.setAttributeNS(nu,t,n):n==null||i&&!Vh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Ce(n)?String(n):n)}function su(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Df(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Vh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function _n(e,t,n,r){e.addEventListener(t,n,r)}function c_(e,t,n,r){e.removeEventListener(t,n,r)}const iu=Symbol("_vei");function u_(e,t,n,r,s=null){const i=e[iu]||(e[iu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=h_(t);if(r){const f=i[t]=p_(r,s);_n(e,l,f,u)}else a&&(c_(e,l,a,u),i[t]=void 0)}}const ou=/(?:Once|Passive|Capture)$/;function h_(e){let t;if(ou.test(e)){t={};let r;for(;r=e.match(ou);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xn(e.slice(2)),t]}let Xo=0;const f_=Promise.resolve(),d_=()=>Xo||(f_.then(()=>Xo=0),Xo=Date.now());function p_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$e(g_(r,n.value),t,5,[r])};return n.value=e,n.attached=d_(),n}function g_(e,t){if(et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const au=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,m_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?r_(e,r,a):t==="style"?a_(e,n,r):Zi(t)?Ha(t)||u_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):__(e,t,r,a))?(su(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ru(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(r))?su(e,Ae(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ru(e,t,r,a))};function __(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&au(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return au(t)&&Bt(n)?!1:t in e}const br=e=>{const t=e.props["onUpdate:modelValue"]||!1;return et(t)?n=>_i(t,n):t};function y_(e){e.target.composing=!0}function lu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qe=Symbol("_assign");function cu(e,t,n){return t&&(e=e.trim()),n&&(e=ro(e)),e}const E_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Qe]=br(s);const i=r||s.props&&s.props.type==="number";_n(e,t?"change":"input",a=>{a.target.composing||e[Qe](cu(e.value,n,i))}),(n||i)&&_n(e,"change",()=>{e.value=cu(e.value,n,i)}),t||(_n(e,"compositionstart",y_),_n(e,"compositionend",lu),_n(e,"change",lu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Qe]=br(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?ro(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},v_={created(e,{value:t},n){e.checked=wr(t,n.props.value),e[Qe]=br(n),_n(e,"change",()=>{e[Qe](Ds(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[Qe]=br(r),t!==n&&(e.checked=wr(t,r.props.value))}},Yo={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=to(t);_n(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?ro(Ds(a)):Ds(a));e[Qe](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,nl(()=>{e._assigning=!1})}),e[Qe]=br(r)},mounted(e,{value:t}){uu(e,t)},beforeUpdate(e,t,n){e[Qe]=br(n)},updated(e,{value:t}){e._assigning||uu(e,t)}};function uu(e,t){const n=e.multiple,r=et(t);if(!(n&&!r&&!to(t))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],l=Ds(a);if(n)if(r){const u=typeof l;u==="string"||u==="number"?a.selected=t.some(f=>String(f)===String(l)):a.selected=ag(t,l)>-1}else a.selected=t.has(l);else if(wr(Ds(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ds(e){return"_value"in e?e._value:e.value}const T_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},I_=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=xn(s.key);if(t.some(a=>a===i||T_[a]===i))return e(s)}))},w_=ae({patchProp:m_},e_);let hu;function A_(){return hu||(hu=Am(w_))}const b_=((...e)=>{const t=A_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=R_(r);if(!s)return;const i=t._component;!it(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,S_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function S_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function R_(e){return Bt(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Nf;const fo=e=>Nf=e,xf=Symbol();function Ea(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var vs;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(vs||(vs={}));function C_(){const e=Oh(!0),t=e.run(()=>Xh({}));let n=[],r=[];const s=el({install(i){fo(s),s._a=i,i.provide(xf,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Of=()=>{};function fu(e,t,n,r=Of){e.add(t);const s=()=>{e.delete(t)&&r()};return!n&&Mh()&&lg(s),s}function lr(e,...t){e.forEach(n=>{n(...t)})}const P_=e=>e(),du=Symbol(),Jo=Symbol();function va(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ea(s)&&Ea(r)&&e.hasOwnProperty(n)&&!Mt(r)&&!vn(r)?e[n]=va(s,r):e[n]=r}return e}const V_=Symbol();function D_(e){return!Ea(e)||!Object.prototype.hasOwnProperty.call(e,V_)}const{assign:fn}=Object;function N_(e){return!!(Mt(e)&&e.effect)}function x_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let u;function f(){l||(n.state.value[e]=s?s():{});const d=xg(n.state.value[e]);return fn(d,i,Object.keys(a||{}).reduce((g,v)=>(g[v]=el(Es(()=>{fo(n);const S=n._s.get(e);return a[v].call(S,S)})),g),{}))}return u=Mf(e,f,t,n,r,!0),u}function Mf(e,t,n={},r,s,i){let a;const l=fn({actions:{}},n),u={deep:!0};let f,d,g=new Set,v=new Set,S;const x=r.state.value[e];!i&&!x&&(r.state.value[e]={}),Xh({});let U;function B(m){let _;f=d=!1,typeof m=="function"?(m(r.state.value[e]),_={type:vs.patchFunction,storeId:e,events:S}):(va(r.state.value[e],m),_={type:vs.patchObject,payload:m,storeId:e,events:S});const I=U=Symbol();nl().then(()=>{U===I&&(f=!0)}),d=!0,lr(g,_,r.state.value[e])}const W=i?function(){const{state:_}=n,I=_?_():{};this.$patch(T=>{fn(T,I)})}:Of;function G(){a.stop(),g.clear(),v.clear(),r._s.delete(e)}const Q=(m,_="")=>{if(du in m)return m[Jo]=_,m;const I=function(){fo(r);const T=Array.from(arguments),b=new Set,y=new Set;function kt(at){b.add(at)}function Ee(at){y.add(at)}lr(v,{args:T,name:I[Jo],store:rt,after:kt,onError:Ee});let Vt;try{Vt=m.apply(this&&this.$id===e?this:rt,T)}catch(at){throw lr(y,at),at}return Vt instanceof Promise?Vt.then(at=>(lr(b,at),at)).catch(at=>(lr(y,at),Promise.reject(at))):(lr(b,Vt),Vt)};return I[du]=!0,I[Jo]=_,I},K={_p:r,$id:e,$onAction:fu.bind(null,v),$patch:B,$reset:W,$subscribe(m,_={}){const I=fu(g,m,_.detached,()=>T()),T=a.run(()=>Ei(()=>r.state.value[e],b=>{(_.flush==="sync"?d:f)&&m({storeId:e,type:vs.direct,events:S},b)},fn({},u,_)));return I},$dispose:G},rt=oo(K);r._s.set(e,rt);const w=(r._a&&r._a.runWithContext||P_)(()=>r._e.run(()=>(a=Oh()).run(()=>t({action:Q}))));for(const m in w){const _=w[m];if(Mt(_)&&!N_(_)||vn(_))i||(x&&D_(_)&&(Mt(_)?_.value=x[m]:va(_,x[m])),r.state.value[e][m]=_);else if(typeof _=="function"){const I=Q(_,m);w[m]=I,l.actions[m]=_}}return fn(rt,w),fn(gt(rt),w),Object.defineProperty(rt,"$state",{get:()=>r.state.value[e],set:m=>{B(_=>{fn(_,m)})}}),r._p.forEach(m=>{fn(rt,a.run(()=>m({store:rt,app:r._a,pinia:r,options:l})))}),x&&i&&n.hydrate&&n.hydrate(rt.$state,x),f=!0,d=!0,rt}/*! #__NO_SIDE_EFFECTS__ */function O_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const u=_m();return a=a||(u?_s(xf,null):null),a&&fo(a),a=Nf,a._s.has(e)||(s?Mf(e,t,r,a):x_(e,r,a)),a._s.get(e)}return i.$id=e,i}const On=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},M_={},k_={class:"carafe"};function L_(e,t){return pt(),Ct("div",k_,[yi(e.$slots,"top",{},void 0,!0),yi(e.$slots,"mid",{},void 0,!0),yi(e.$slots,"bottom",{},void 0,!0)])}const F_=On(M_,[["render",L_],["__scopeId","data-v-fff01356"]]),U_={},B_={class:"mug"};function j_(e,t){return pt(),Ct("div",B_,[yi(e.$slots,"default")])}const $_=On(U_,[["render",j_]]),q_=$s({__name:"Syrup",props:{color:{},height:{}},setup(e){return(t,n)=>(pt(),Ct("div",{class:"syrup",style:xr({backgroundColor:e.color,height:e.height+"%"})},null,4))}}),H_=On(q_,[["__scopeId","data-v-5c65cdd9"]]),z_=$s({__name:"Base",props:{color:{},height:{}},setup(e){return(t,n)=>(pt(),Ct("div",{class:"baseBeverage",style:xr({backgroundColor:e.color,height:e.height+"%"})},null,4))}}),K_=On(z_,[["__scopeId","data-v-b03ea88d"]]),W_=$s({__name:"Creamer",props:{color:{},height:{}},setup(e){return(t,n)=>(pt(),Ct("div",{class:"froth",style:xr({backgroundColor:e.color,height:e.height+"%"})},[(pt(),Ct(Ot,null,gn(5,r=>It("div",{key:r,class:"foam"})),64))],4))}}),G_=On(W_,[["__scopeId","data-v-365c7b44"]]),Q_={},X_={id:"steam"},Y_={class:"stream"};function J_(e,t){return pt(),Ct("div",X_,[(pt(),Ct(Ot,null,gn(3,()=>It("div",Y_)),64))])}const Z_=On(Q_,[["render",J_]]),ty={},ey={id:"condensation"},ny={class:"flake"};function ry(e,t){return pt(),Ct("div",ey,[(pt(),Ct(Ot,null,gn(3,()=>It("div",ny)),64))])}const sy=On(ty,[["render",ry]]),ci=20,iy=$s({__name:"Beverage",props:{isIced:{type:Boolean},base:{},creamer:{},syrup:{}},setup(e){const t=e,n=Es(()=>t.creamer.name!=="No Cream"),r=Es(()=>t.syrup.name!=="No Syrup"),s=Es(()=>100-(n.value?ci:0)-(r.value?ci:0));return(i,a)=>(pt(),mn($_,null,{default:as(()=>[e.isIced?(pt(),mn(sy,{key:0})):(pt(),mn(Z_,{key:1})),ye(F_,null,{top:as(()=>[n.value?(pt(),mn(G_,{key:0,color:e.creamer.color,height:ci},null,8,["color"])):Gc("",!0)]),mid:as(()=>[r.value?(pt(),mn(H_,{key:0,color:e.syrup.color,height:ci},null,8,["color"])):Gc("",!0)]),bottom:as(()=>[ye(K_,{color:e.base.color,height:s.value},null,8,["color","height"])]),_:1})]),_:1}))}}),oy=()=>{};var pu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},ay=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Lf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,d=i>>2,g=(i&3)<<4|l>>4;let v=(l&15)<<2|f>>6,S=f&63;u||(S=64,a||(v=64)),r.push(n[d],n[g],n[v],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ay(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||g==null)throw new ly;const v=i<<2|l>>4;if(r.push(v),f!==64){const S=l<<4&240|f>>2;if(r.push(S),g!==64){const x=f<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ly extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cy=function(e){const t=kf(e);return Lf.encodeByteArray(t,!0)},ki=function(e){return cy(e).replace(/\./g,"")},uy=function(e){try{return Lf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=()=>hy().__FIREBASE_DEFAULTS__,dy=()=>{if(typeof process>"u"||typeof pu>"u")return;const e=pu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},py=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&uy(e[1]);return t&&JSON.parse(t)},cl=()=>{try{return oy()||fy()||dy()||py()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},gy=e=>{var t,n;return(n=(t=cl())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},my=e=>{const t=gy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ff=()=>{var e;return(e=cl())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yy(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ki(JSON.stringify(n)),ki(JSON.stringify(a)),""].join(".")}const Ts={};function vy(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ts))Ts[t]?e.emulator.push(t):e.prod.push(t);return e}function Ty(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let gu=!1;function Iy(e,t){if(typeof window>"u"||typeof document>"u"||!ul(window.location.host)||Ts[e]===t||Ts[e]||gu)return;Ts[e]=t;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",i=vy().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,S){v.setAttribute("width","24"),v.setAttribute("id",S),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{gu=!0,a()},v}function d(v,S){v.setAttribute("id",S),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=Ty(r),S=n("text"),x=document.getElementById(S)||document.createElement("span"),U=n("learnmore"),B=document.getElementById(U)||document.createElement("a"),W=n("preprendIcon"),G=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const Q=v.element;l(Q),d(B,U);const K=f();u(G,W),Q.append(G,x,B,K),document.body.appendChild(Q)}i?(x.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ay(){var t;const e=(t=cl())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function by(){return!Ay()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sy(){try{return typeof indexedDB=="object"}catch{return!1}}function Ry(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)==null?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="FirebaseError";class Or extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Cy,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uf.prototype.create)}}class Uf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Py(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Or(s,l,r)}}function Py(e,t){return e.replace(Vy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Vy=/\{\$([^}]+)}/g;function Li(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(mu(i)&&mu(a)){if(!Li(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function mu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(e){return e&&e._delegate?e._delegate:e}class Ns{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new _y;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xy(t))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zn){return this.instances.has(t)}getOptions(t=zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ny(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zn){return this.component?this.component.multipleInstances?t:zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ny(e){return e===zn?void 0:e}function xy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Dy(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ft||(ft={}));const My={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},ky=ft.INFO,Ly={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},Fy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ly[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bf{constructor(t){this.name=t,this._logLevel=ky,this._logHandler=Fy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?My[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...t),this._logHandler(this,ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...t),this._logHandler(this,ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...t),this._logHandler(this,ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...t),this._logHandler(this,ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...t),this._logHandler(this,ft.ERROR,...t)}}const Uy=(e,t)=>t.some(n=>e instanceof n);let _u,yu;function By(){return _u||(_u=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jy(){return yu||(yu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jf=new WeakMap,Ta=new WeakMap,$f=new WeakMap,Zo=new WeakMap,hl=new WeakMap;function $y(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Tn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&jf.set(n,e)}).catch(()=>{}),hl.set(t,e),t}function qy(e){if(Ta.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Ta.set(e,t)}let Ia={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ta.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$f.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Hy(e){Ia=e(Ia)}function zy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ta(this),t,...n);return $f.set(r,t.sort?t.sort():[t]),Tn(r)}:jy().includes(e)?function(...t){return e.apply(ta(this),t),Tn(jf.get(this))}:function(...t){return Tn(e.apply(ta(this),t))}}function Ky(e){return typeof e=="function"?zy(e):(e instanceof IDBTransaction&&qy(e),Uy(e,By())?new Proxy(e,Ia):e)}function Tn(e){if(e instanceof IDBRequest)return $y(e);if(Zo.has(e))return Zo.get(e);const t=Ky(e);return t!==e&&(Zo.set(e,t),hl.set(t,e)),t}const ta=e=>hl.get(e);function Wy(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Tn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Tn(a.result),u.oldVersion,u.newVersion,Tn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Gy=["get","getKey","getAll","getAllKeys","count"],Qy=["put","add","delete","clear"],ea=new Map;function Eu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ea.get(t))return ea.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Qy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Gy.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return ea.set(t,i),i}Hy(e=>({...e,get:(t,n,r)=>Eu(t,n)||e.get(t,n,r),has:(t,n)=>!!Eu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wa="@firebase/app",vu="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new Bf("@firebase/app"),Jy="@firebase/app-compat",Zy="@firebase/analytics-compat",tE="@firebase/analytics",eE="@firebase/app-check-compat",nE="@firebase/app-check",rE="@firebase/auth",sE="@firebase/auth-compat",iE="@firebase/database",oE="@firebase/data-connect",aE="@firebase/database-compat",lE="@firebase/functions",cE="@firebase/functions-compat",uE="@firebase/installations",hE="@firebase/installations-compat",fE="@firebase/messaging",dE="@firebase/messaging-compat",pE="@firebase/performance",gE="@firebase/performance-compat",mE="@firebase/remote-config",_E="@firebase/remote-config-compat",yE="@firebase/storage",EE="@firebase/storage-compat",vE="@firebase/firestore",TE="@firebase/ai",IE="@firebase/firestore-compat",wE="firebase",AE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]",bE={[wa]:"fire-core",[Jy]:"fire-core-compat",[tE]:"fire-analytics",[Zy]:"fire-analytics-compat",[nE]:"fire-app-check",[eE]:"fire-app-check-compat",[rE]:"fire-auth",[sE]:"fire-auth-compat",[iE]:"fire-rtdb",[oE]:"fire-data-connect",[aE]:"fire-rtdb-compat",[lE]:"fire-fn",[cE]:"fire-fn-compat",[uE]:"fire-iid",[hE]:"fire-iid-compat",[fE]:"fire-fcm",[dE]:"fire-fcm-compat",[pE]:"fire-perf",[gE]:"fire-perf-compat",[mE]:"fire-rc",[_E]:"fire-rc-compat",[yE]:"fire-gcs",[EE]:"fire-gcs-compat",[vE]:"fire-fst",[IE]:"fire-fst-compat",[TE]:"fire-vertex","fire-js":"fire-js",[wE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Map,SE=new Map,ba=new Map;function Tu(e,t){try{e.container.addComponent(t)}catch(n){tn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ui(e){const t=e.name;if(ba.has(t))return tn.debug(`There were multiple attempts to register component ${t}.`),!1;ba.set(t,e);for(const n of Fi.values())Tu(n,e);for(const n of SE.values())Tu(n,e);return!0}function RE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function CE(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Uf("app","Firebase",PE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=AE;function qf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:Aa,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw In.create("bad-app-name",{appName:String(s)});if(n||(n=Ff()),!n)throw In.create("no-options");const i=Fi.get(s);if(i){if(Li(n,i.options)&&Li(r,i.config))return i;throw In.create("duplicate-app",{appName:s})}const a=new Oy(s);for(const u of ba.values())a.addComponent(u);const l=new VE(n,r,a);return Fi.set(s,l),l}function NE(e=Aa){const t=Fi.get(e);if(!t&&e===Aa&&Ff())return qf();if(!t)throw In.create("no-app",{appName:e});return t}function Er(e,t,n){let r=bE[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tn.warn(a.join(" "));return}Ui(new Ns(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firebase-heartbeat-database",OE=1,xs="firebase-heartbeat-store";let na=null;function Hf(){return na||(na=Wy(xE,OE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xs)}catch(n){console.warn(n)}}}}).catch(e=>{throw In.create("idb-open",{originalErrorMessage:e.message})})),na}async function ME(e){try{const n=(await Hf()).transaction(xs),r=await n.objectStore(xs).get(zf(e));return await n.done,r}catch(t){if(t instanceof Or)tn.warn(t.message);else{const n=In.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});tn.warn(n.message)}}}async function Iu(e,t){try{const r=(await Hf()).transaction(xs,"readwrite");await r.objectStore(xs).put(t,zf(e)),await r.done}catch(n){if(n instanceof Or)tn.warn(n.message);else{const r=In.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tn.warn(r.message)}}}function zf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=1024,LE=30;class FE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wu();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>LE){const a=jE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wu(),{heartbeatsToSend:r,unsentEntries:s}=UE(this._heartbeatsCache.heartbeats),i=ki(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return tn.warn(n),""}}}function wu(){return new Date().toISOString().substring(0,10)}function UE(e,t=kE){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Au(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Au(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sy()?Ry().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ME(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Au(e){return ki(JSON.stringify({version:2,heartbeats:e})).length}function jE(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(e){Ui(new Ns("platform-logger",t=>new Xy(t),"PRIVATE")),Ui(new Ns("heartbeat",t=>new FE(t),"PRIVATE")),Er(wa,vu,e),Er(wa,vu,"esm2020"),Er("fire-js","")}$E("");var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wn,Kf;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,m){function _(){}_.prototype=m.prototype,w.F=m.prototype,w.prototype=new _,w.prototype.constructor=w,w.D=function(I,T,b){for(var y=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)y[kt-2]=arguments[kt];return m.prototype[T].apply(I,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,m,_){_||(_=0);const I=Array(16);if(typeof m=="string")for(var T=0;T<16;++T)I[T]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(T=0;T<16;++T)I[T]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=w.g[0],_=w.g[1],T=w.g[2];let b=w.g[3],y;y=m+(b^_&(T^b))+I[0]+3614090360&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(T^m&(_^T))+I[1]+3905402710&4294967295,b=m+(y<<12&4294967295|y>>>20),y=T+(_^b&(m^_))+I[2]+606105819&4294967295,T=b+(y<<17&4294967295|y>>>15),y=_+(m^T&(b^m))+I[3]+3250441966&4294967295,_=T+(y<<22&4294967295|y>>>10),y=m+(b^_&(T^b))+I[4]+4118548399&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(T^m&(_^T))+I[5]+1200080426&4294967295,b=m+(y<<12&4294967295|y>>>20),y=T+(_^b&(m^_))+I[6]+2821735955&4294967295,T=b+(y<<17&4294967295|y>>>15),y=_+(m^T&(b^m))+I[7]+4249261313&4294967295,_=T+(y<<22&4294967295|y>>>10),y=m+(b^_&(T^b))+I[8]+1770035416&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(T^m&(_^T))+I[9]+2336552879&4294967295,b=m+(y<<12&4294967295|y>>>20),y=T+(_^b&(m^_))+I[10]+4294925233&4294967295,T=b+(y<<17&4294967295|y>>>15),y=_+(m^T&(b^m))+I[11]+2304563134&4294967295,_=T+(y<<22&4294967295|y>>>10),y=m+(b^_&(T^b))+I[12]+1804603682&4294967295,m=_+(y<<7&4294967295|y>>>25),y=b+(T^m&(_^T))+I[13]+4254626195&4294967295,b=m+(y<<12&4294967295|y>>>20),y=T+(_^b&(m^_))+I[14]+2792965006&4294967295,T=b+(y<<17&4294967295|y>>>15),y=_+(m^T&(b^m))+I[15]+1236535329&4294967295,_=T+(y<<22&4294967295|y>>>10),y=m+(T^b&(_^T))+I[1]+4129170786&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^T&(m^_))+I[6]+3225465664&4294967295,b=m+(y<<9&4294967295|y>>>23),y=T+(m^_&(b^m))+I[11]+643717713&4294967295,T=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(T^b))+I[0]+3921069994&4294967295,_=T+(y<<20&4294967295|y>>>12),y=m+(T^b&(_^T))+I[5]+3593408605&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^T&(m^_))+I[10]+38016083&4294967295,b=m+(y<<9&4294967295|y>>>23),y=T+(m^_&(b^m))+I[15]+3634488961&4294967295,T=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(T^b))+I[4]+3889429448&4294967295,_=T+(y<<20&4294967295|y>>>12),y=m+(T^b&(_^T))+I[9]+568446438&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^T&(m^_))+I[14]+3275163606&4294967295,b=m+(y<<9&4294967295|y>>>23),y=T+(m^_&(b^m))+I[3]+4107603335&4294967295,T=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(T^b))+I[8]+1163531501&4294967295,_=T+(y<<20&4294967295|y>>>12),y=m+(T^b&(_^T))+I[13]+2850285829&4294967295,m=_+(y<<5&4294967295|y>>>27),y=b+(_^T&(m^_))+I[2]+4243563512&4294967295,b=m+(y<<9&4294967295|y>>>23),y=T+(m^_&(b^m))+I[7]+1735328473&4294967295,T=b+(y<<14&4294967295|y>>>18),y=_+(b^m&(T^b))+I[12]+2368359562&4294967295,_=T+(y<<20&4294967295|y>>>12),y=m+(_^T^b)+I[5]+4294588738&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^T)+I[8]+2272392833&4294967295,b=m+(y<<11&4294967295|y>>>21),y=T+(b^m^_)+I[11]+1839030562&4294967295,T=b+(y<<16&4294967295|y>>>16),y=_+(T^b^m)+I[14]+4259657740&4294967295,_=T+(y<<23&4294967295|y>>>9),y=m+(_^T^b)+I[1]+2763975236&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^T)+I[4]+1272893353&4294967295,b=m+(y<<11&4294967295|y>>>21),y=T+(b^m^_)+I[7]+4139469664&4294967295,T=b+(y<<16&4294967295|y>>>16),y=_+(T^b^m)+I[10]+3200236656&4294967295,_=T+(y<<23&4294967295|y>>>9),y=m+(_^T^b)+I[13]+681279174&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^T)+I[0]+3936430074&4294967295,b=m+(y<<11&4294967295|y>>>21),y=T+(b^m^_)+I[3]+3572445317&4294967295,T=b+(y<<16&4294967295|y>>>16),y=_+(T^b^m)+I[6]+76029189&4294967295,_=T+(y<<23&4294967295|y>>>9),y=m+(_^T^b)+I[9]+3654602809&4294967295,m=_+(y<<4&4294967295|y>>>28),y=b+(m^_^T)+I[12]+3873151461&4294967295,b=m+(y<<11&4294967295|y>>>21),y=T+(b^m^_)+I[15]+530742520&4294967295,T=b+(y<<16&4294967295|y>>>16),y=_+(T^b^m)+I[2]+3299628645&4294967295,_=T+(y<<23&4294967295|y>>>9),y=m+(T^(_|~b))+I[0]+4096336452&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~T))+I[7]+1126891415&4294967295,b=m+(y<<10&4294967295|y>>>22),y=T+(m^(b|~_))+I[14]+2878612391&4294967295,T=b+(y<<15&4294967295|y>>>17),y=_+(b^(T|~m))+I[5]+4237533241&4294967295,_=T+(y<<21&4294967295|y>>>11),y=m+(T^(_|~b))+I[12]+1700485571&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~T))+I[3]+2399980690&4294967295,b=m+(y<<10&4294967295|y>>>22),y=T+(m^(b|~_))+I[10]+4293915773&4294967295,T=b+(y<<15&4294967295|y>>>17),y=_+(b^(T|~m))+I[1]+2240044497&4294967295,_=T+(y<<21&4294967295|y>>>11),y=m+(T^(_|~b))+I[8]+1873313359&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~T))+I[15]+4264355552&4294967295,b=m+(y<<10&4294967295|y>>>22),y=T+(m^(b|~_))+I[6]+2734768916&4294967295,T=b+(y<<15&4294967295|y>>>17),y=_+(b^(T|~m))+I[13]+1309151649&4294967295,_=T+(y<<21&4294967295|y>>>11),y=m+(T^(_|~b))+I[4]+4149444226&4294967295,m=_+(y<<6&4294967295|y>>>26),y=b+(_^(m|~T))+I[11]+3174756917&4294967295,b=m+(y<<10&4294967295|y>>>22),y=T+(m^(b|~_))+I[2]+718787259&4294967295,T=b+(y<<15&4294967295|y>>>17),y=_+(b^(T|~m))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(T+(y<<21&4294967295|y>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,m){m===void 0&&(m=w.length);const _=m-this.blockSize,I=this.C;let T=this.h,b=0;for(;b<m;){if(T==0)for(;b<=_;)s(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<m;)if(I[T++]=w.charCodeAt(b++),T==this.blockSize){s(this,I),T=0;break}}else for(;b<m;)if(I[T++]=w[b++],T==this.blockSize){s(this,I),T=0;break}}this.h=T,this.o+=m},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;m=this.o*8;for(var _=w.length-8;_<w.length;++_)w[_]=m&255,m/=256;for(this.v(w),w=Array(16),m=0,_=0;_<4;++_)for(let I=0;I<32;I+=8)w[m++]=this.g[_]>>>I&255;return w};function i(w,m){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=m(w)}function a(w,m){this.h=m;const _=[];let I=!0;for(let T=w.length-1;T>=0;T--){const b=w[T]|0;I&&b==m||(_[T]=b,I=!1)}this.g=_}var l={};function u(w){return-128<=w&&w<128?i(w,function(m){return new a([m|0],m<0?-1:0)}):new a([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return g;if(w<0)return B(f(-w));const m=[];let _=1;for(let I=0;w>=_;I++)m[I]=w/_|0,_*=4294967296;return new a(m,0)}function d(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return B(d(w.substring(1),m));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=f(Math.pow(m,8));let I=g;for(let b=0;b<w.length;b+=8){var T=Math.min(8,w.length-b);const y=parseInt(w.substring(b,b+T),m);T<8?(T=f(Math.pow(m,T)),I=I.j(T).add(f(y))):(I=I.j(_),I=I.add(f(y)))}return I}var g=u(0),v=u(1),S=u(16777216);e=a.prototype,e.m=function(){if(U(this))return-B(this).m();let w=0,m=1;for(let _=0;_<this.g.length;_++){const I=this.i(_);w+=(I>=0?I:4294967296+I)*m,m*=4294967296}return w},e.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x(this))return"0";if(U(this))return"-"+B(this).toString(w);const m=f(Math.pow(w,6));var _=this;let I="";for(;;){const T=K(_,m).g;_=W(_,T.j(m));let b=((_.g.length>0?_.g[0]:_.h)>>>0).toString(w);if(_=T,x(_))return b+I;for(;b.length<6;)b="0"+b;I=b+I}},e.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function x(w){if(w.h!=0)return!1;for(let m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function U(w){return w.h==-1}e.l=function(w){return w=W(this,w),U(w)?-1:x(w)?0:1};function B(w){const m=w.g.length,_=[];for(let I=0;I<m;I++)_[I]=~w.g[I];return new a(_,~w.h).add(v)}e.abs=function(){return U(this)?B(this):this},e.add=function(w){const m=Math.max(this.g.length,w.g.length),_=[];let I=0;for(let T=0;T<=m;T++){let b=I+(this.i(T)&65535)+(w.i(T)&65535),y=(b>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);I=y>>>16,b&=65535,y&=65535,_[T]=y<<16|b}return new a(_,_[_.length-1]&-2147483648?-1:0)};function W(w,m){return w.add(B(m))}e.j=function(w){if(x(this)||x(w))return g;if(U(this))return U(w)?B(this).j(B(w)):B(B(this).j(w));if(U(w))return B(this.j(B(w)));if(this.l(S)<0&&w.l(S)<0)return f(this.m()*w.m());const m=this.g.length+w.g.length,_=[];for(var I=0;I<2*m;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(let T=0;T<w.g.length;T++){const b=this.i(I)>>>16,y=this.i(I)&65535,kt=w.i(T)>>>16,Ee=w.i(T)&65535;_[2*I+2*T]+=y*Ee,G(_,2*I+2*T),_[2*I+2*T+1]+=b*Ee,G(_,2*I+2*T+1),_[2*I+2*T+1]+=y*kt,G(_,2*I+2*T+1),_[2*I+2*T+2]+=b*kt,G(_,2*I+2*T+2)}for(w=0;w<m;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=m;w<2*m;w++)_[w]=0;return new a(_,0)};function G(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function Q(w,m){this.g=w,this.h=m}function K(w,m){if(x(m))throw Error("division by zero");if(x(w))return new Q(g,g);if(U(w))return m=K(B(w),m),new Q(B(m.g),B(m.h));if(U(m))return m=K(w,B(m)),new Q(B(m.g),m.h);if(w.g.length>30){if(U(w)||U(m))throw Error("slowDivide_ only works with positive integers.");for(var _=v,I=m;I.l(w)<=0;)_=rt(_),I=rt(I);var T=Et(_,1),b=Et(I,1);for(I=Et(I,2),_=Et(_,2);!x(I);){var y=b.add(I);y.l(w)<=0&&(T=T.add(_),b=y),I=Et(I,1),_=Et(_,1)}return m=W(w,T.j(m)),new Q(T,m)}for(T=g;w.l(m)>=0;){for(_=Math.max(1,Math.floor(w.m()/m.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),b=f(_),y=b.j(m);U(y)||y.l(w)>0;)_-=I,b=f(_),y=b.j(m);x(b)&&(b=v),T=T.add(b),w=W(w,y)}return new Q(T,w)}e.B=function(w){return K(this,w).h},e.and=function(w){const m=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<m;I++)_[I]=this.i(I)&w.i(I);return new a(_,this.h&w.h)},e.or=function(w){const m=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<m;I++)_[I]=this.i(I)|w.i(I);return new a(_,this.h|w.h)},e.xor=function(w){const m=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<m;I++)_[I]=this.i(I)^w.i(I);return new a(_,this.h^w.h)};function rt(w){const m=w.g.length+1,_=[];for(let I=0;I<m;I++)_[I]=w.i(I)<<1|w.i(I-1)>>>31;return new a(_,w.h)}function Et(w,m){const _=m>>5;m%=32;const I=w.g.length-_,T=[];for(let b=0;b<I;b++)T[b]=m>0?w.i(b+_)>>>m|w.i(b+_+1)<<32-m:w.i(b+_);return new a(T,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Kf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,wn=a}).apply(typeof bu<"u"?bu:typeof self<"u"?self:typeof window<"u"?window:{});var ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wf,cs,Gf,Ii,Sa,Qf,Xf,Yf;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ui=="object"&&ui];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&t(h,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var h=[],p;for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&h.push([p,c[p]]);return h}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,h){return o.call.apply(o.bind,arguments)}function f(o,c,h){return f=u,f.apply(null,arguments)}function d(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function g(o,c){function h(){}h.prototype=c.prototype,o.Z=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Ob=function(p,R,C){for(var j=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)j[ot-2]=arguments[ot];return c.prototype[R].apply(p,j)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function S(o){const c=o.length;if(c>0){const h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function x(o,c){for(let p=1;p<arguments.length;p++){const R=arguments[p];var h=typeof R;if(h=h!="object"?h:R?Array.isArray(R)?"array":h:"null",h=="array"||h=="object"&&typeof R.length=="number"){h=o.length||0;const C=R.length||0;o.length=h+C;for(let j=0;j<C;j++)o[h+j]=R[j]}else o.push(R)}}class U{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function B(o){a.setTimeout(()=>{throw o},0)}function W(){var o=w;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class G{constructor(){this.h=this.g=null}add(c,h){const p=Q.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Q=new U(()=>new K,o=>o.reset());class K{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,Et=!1,w=new G,m=()=>{const o=Promise.resolve(void 0);rt=()=>{o.then(_)}};function _(){for(var o;o=W();){try{o.h.call(o.g)}catch(h){B(h)}var c=Q;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}Et=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};a.addEventListener("test",h,c),a.removeEventListener("test",h,c)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function kt(o,c){T.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}g(kt,T),kt.prototype.init=function(o,c){const h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&kt.Z.h.call(this)},kt.prototype.h=function(){kt.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Vt=0;function at(o,c,h,p,R){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=R,this.key=++Vt,this.da=this.fa=!1}function mt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ve(o,c,h){for(const p in o)c.call(h,o[p],p,o)}function er(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function Ve(o){const c={};for(const h in o)c[h]=o[h];return c}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Br(o,c){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<fe.length;C++)h=fe[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function nr(o){this.src=o,this.g={},this.h=0}nr.prototype.add=function(o,c,h,p,R){const C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);const j=He(o,c,p,R);return j>-1?(c=o[j],h||(c.fa=!1)):(c=new at(c,this.src,C,!!p,R),c.fa=h,o.push(c)),c};function jr(o,c){const h=c.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,c,void 0),C;(C=R>=0)&&Array.prototype.splice.call(p,R,1),C&&(mt(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function He(o,c,h,p){for(let R=0;R<o.length;++R){const C=o[R];if(!C.da&&C.listener==c&&C.capture==!!h&&C.ha==p)return R}return-1}var sn="closure_lm_"+(Math.random()*1e6|0),Mn={};function $r(o,c,h,p,R){if(Array.isArray(c)){for(let C=0;C<c.length;C++)$r(o,c[C],h,p,R);return null}return h=$(h),o&&o[Ee]?o.J(c,h,l(p)?!!p.capture:!1,R):kn(o,c,h,!1,p,R)}function kn(o,c,h,p,R,C){if(!c)throw Error("Invalid event type");const j=l(R)?!!R.capture:!!R;let ot=N(o);if(ot||(o[sn]=ot=new nr(o)),h=ot.add(c,h,p,j,C),h.proxy)return h;if(p=ql(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)b||(R=j),R===void 0&&(R=!1),o.addEventListener(c.toString(),p,R);else if(o.attachEvent)o.attachEvent(P(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function ql(){function o(h){return c.call(o.src,o.listener,h)}const c=F;return o}function E(o,c,h,p,R){if(Array.isArray(c))for(var C=0;C<c.length;C++)E(o,c[C],h,p,R);else p=l(p)?!!p.capture:!!p,h=$(h),o&&o[Ee]?(o=o.i,C=String(c).toString(),C in o.g&&(c=o.g[C],h=He(c,h,p,R),h>-1&&(mt(c[h]),Array.prototype.splice.call(c,h,1),c.length==0&&(delete o.g[C],o.h--)))):o&&(o=N(o))&&(c=o.g[c.toString()],o=-1,c&&(o=He(c,h,p,R)),(h=o>-1?c[o]:null)&&A(h))}function A(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ee])jr(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(P(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=N(c))?(jr(h,o),h.h==0&&(h.src=null,c[sn]=null)):mt(o)}}}function P(o){return o in Mn?Mn[o]:Mn[o]="on"+o}function F(o,c){if(o.da)o=!0;else{c=new kt(c,this);const h=o.listener,p=o.ha||o.src;o.fa&&A(o),o=h.call(p,c)}return o}function N(o){return o=o[sn],o instanceof nr?o:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(o){return typeof o=="function"?o:(o[O]||(o[O]=function(c){return o.handleEvent(c)}),o[O])}function L(){I.call(this),this.i=new nr(this),this.M=this,this.G=null}g(L,I),L.prototype[Ee]=!0,L.prototype.removeEventListener=function(o,c,h,p){E(this,o,c,h,p)};function k(o,c){var h,p=o.G;if(p)for(h=[];p;p=p.G)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new T(c,o);else if(c instanceof T)c.target=c.target||o;else{var R=c;c=new T(p,o),Br(c,R)}R=!0;let C,j;if(h)for(j=h.length-1;j>=0;j--)C=c.g=h[j],R=M(C,p,!0,c)&&R;if(C=c.g=o,R=M(C,p,!0,c)&&R,R=M(C,p,!1,c)&&R,h)for(j=0;j<h.length;j++)C=c.g=h[j],R=M(C,p,!1,c)&&R}L.prototype.N=function(){if(L.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const h=o.g[c];for(let p=0;p<h.length;p++)mt(h[p]);delete o.g[c],o.h--}}this.G=null},L.prototype.J=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},L.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function M(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let R=!0;for(let C=0;C<c.length;++C){const j=c[C];if(j&&!j.da&&j.capture==h){const ot=j.listener,jt=j.ha||j.src;j.fa&&jr(o.i,j),R=ot.call(jt,p)!==!1&&R}}return R&&!p.defaultPrevented}function J(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function q(o){o.g=J(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Y extends I{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(o){I.call(this),this.h=o,this.g={}}g(Z,I);var lt=[];function vt(o){ve(o.g,function(c,h){this.g.hasOwnProperty(h)&&A(c)},o),o.g={}}Z.prototype.N=function(){Z.Z.N.call(this),vt(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=a.JSON.stringify,Zt=a.JSON.parse,te=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function de(){}function pe(){}var be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rr(){T.call(this,"d")}g(rr,T);function Wt(){T.call(this,"c")}g(Wt,T);var qt={},qr=null;function Ln(){return qr=qr||new L}qt.Ia="serverreachability";function Hl(o){T.call(this,qt.Ia,o)}g(Hl,T);function Hr(o){const c=Ln();k(c,new Hl(c))}qt.STAT_EVENT="statevent";function zl(o,c){T.call(this,qt.STAT_EVENT,o),this.stat=c}g(zl,T);function le(o){const c=Ln();k(c,new zl(c,o))}qt.Ja="timingevent";function Kl(o,c){T.call(this,qt.Ja,o),this.size=c}g(Kl,T);function zr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function Cp(o,c,h,p,R,C){o.info(function(){if(o.g)if(C){var j="",ot=C.split("&");for(let Tt=0;Tt<ot.length;Tt++){var jt=ot[Tt].split("=");if(jt.length>1){const Ht=jt[0];jt=jt[1];const Ne=Ht.split("_");j=Ne.length>=2&&Ne[1]=="type"?j+(Ht+"="+jt+"&"):j+(Ht+"=redacted&")}}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+c+`
`+h+`
`+j})}function Pp(o,c,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+c+`
`+h+`
`+C+" "+j})}function sr(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Dp(o,h)+(p?" "+p:"")})}function Vp(o,c){o.info(function(){return"TIMEOUT: "+c})}Kr.prototype.info=function(){};function Dp(o,c){if(!o.g)return c;if(!c)return null;try{const C=JSON.parse(c);if(C){for(o=0;o<C.length;o++)if(Array.isArray(C[o])){var h=C[o];if(!(h.length<2)){var p=h[1];if(Array.isArray(p)&&!(p.length<1)){var R=p[0];if(R!="noop"&&R!="stop"&&R!="close")for(let j=1;j<p.length;j++)p[j]=""}}}}return dt(C)}catch{return c}}var Xs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gl;function Ro(){}g(Ro,de),Ro.prototype.g=function(){return new XMLHttpRequest},Gl=new Ro;function Wr(o){return encodeURIComponent(String(o))}function Np(o){var c=1;o=o.split(":");const h=[];for(;c>0&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function on(o,c,h,p){this.j=o,this.i=c,this.l=h,this.S=p||1,this.V=new Z(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ql}function Ql(){this.i=null,this.g="",this.h=!1}var Xl={},Co={};function Po(o,c,h){o.M=1,o.A=Js(De(c)),o.u=h,o.R=!0,Yl(o,null)}function Yl(o,c){o.F=Date.now(),Ys(o),o.B=De(o.A);var h=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),uc(h.i,"t",p),o.C=0,h=o.j.L,o.h=new Ql,o.g=Cc(o.j,h?c:null,!o.u),o.P>0&&(o.O=new Y(f(o.Y,o,o.g),o.P)),c=o.V,h=o.g,p=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(lt[0]=R.toString()),R=lt);for(let C=0;C<R.length;C++){const j=$r(h,R[C],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.J?Ve(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Hr(),Cp(o.i,o.v,o.B,o.l,o.S,o.u)}on.prototype.ba=function(o){o=o.target;const c=this.O;c&&cn(o)==3?c.j():this.Y(o)},on.prototype.Y=function(o){try{if(o==this.g)t:{const ot=cn(this.g),jt=this.g.ya(),Tt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||_c(this.g)))){this.K||ot!=4||jt==7||(jt==8||Tt<=0?Hr(3):Hr(2)),Vo(this);var c=this.g.ca();this.X=c;var h=xp(this);if(this.o=c==200,Pp(this.i,this.v,this.B,this.l,this.S,ot,c),this.o){if(this.U&&!this.L){e:{if(this.g){var p,R=this.g;if((p=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var C=p;break e}}C=null}if(o=C)sr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Do(this,o);else{this.o=!1,this.m=3,le(12),Fn(this),Gr(this);break t}}if(this.R){o=!0;let Ht;for(;!this.K&&this.C<h.length;)if(Ht=Op(this,h),Ht==Co){ot==4&&(this.m=4,le(14),o=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Xl){this.m=4,le(15),sr(this.i,this.l,h,"[Invalid Chunk]"),o=!1;break}else sr(this.i,this.l,Ht,null),Do(this,Ht);if(Jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||h.length!=0||this.h.h||(this.m=1,le(16),o=!1),this.o=this.o&&o,!o)sr(this.i,this.l,h,"[Invalid Chunked Response]"),Fn(this),Gr(this);else if(h.length>0&&!this.W){this.W=!0;var j=this.j;j.g==this&&j.aa&&!j.P&&(j.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),Uo(j),j.P=!0,le(11))}}else sr(this.i,this.l,h,null),Do(this,h);ot==4&&Fn(this),this.o&&!this.K&&(ot==4?Ac(this.j,this):(this.o=!1,Ys(this)))}else Gp(this.g),c==400&&h.indexOf("Unknown SID")>0?(this.m=3,le(12)):(this.m=0,le(13)),Fn(this),Gr(this)}}}catch{}finally{}};function xp(o){if(!Jl(o))return o.g.la();const c=_c(o.g);if(c==="")return"";let h="";const p=c.length,R=cn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Fn(o),Gr(o),"";o.h.i=new a.TextDecoder}for(let C=0;C<p;C++)o.h.h=!0,h+=o.h.i.decode(c[C],{stream:!(R&&C==p-1)});return c.length=0,o.h.g+=h,o.C=0,o.h.g}function Jl(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Op(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?Co:(h=Number(c.substring(h,p)),isNaN(h)?Xl:(p+=1,p+h>c.length?Co:(c=c.slice(p,p+h),o.C=p+h,c)))}on.prototype.cancel=function(){this.K=!0,Fn(this)};function Ys(o){o.T=Date.now()+o.H,Zl(o,o.H)}function Zl(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=zr(f(o.aa,o),c)}function Vo(o){o.D&&(a.clearTimeout(o.D),o.D=null)}on.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Vp(this.i,this.B),this.M!=2&&(Hr(),le(17)),Fn(this),this.m=2,Gr(this)):Zl(this,this.T-o)};function Gr(o){o.j.I==0||o.K||Ac(o.j,o)}function Fn(o){Vo(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,vt(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function Do(o,c){try{var h=o.j;if(h.I!=0&&(h.g==o||No(h.h,o))){if(!o.L&&No(h.h,o)&&h.I==3){try{var p=h.Ba.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.v){if(h.g)if(h.g.F+3e3<o.F)ri(h),ei(h);else break t;Fo(h),le(18)}}else h.xa=R[1],0<h.xa-h.K&&R[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=zr(f(h.Va,h),6e3));nc(h.h)<=1&&h.ta&&(h.ta=void 0)}else Bn(h,11)}else if((o.L||h.g==o)&&ri(h),!y(c))for(R=h.Ba.g.parse(c),c=0;c<R.length;c++){let Tt=R[c];const Ht=Tt[0];if(!(Ht<=h.K))if(h.K=Ht,Tt=Tt[1],h.I==2)if(Tt[0]=="c"){h.M=Tt[1],h.ba=Tt[2];const Ne=Tt[3];Ne!=null&&(h.ka=Ne,h.j.info("VER="+h.ka));const jn=Tt[4];jn!=null&&(h.za=jn,h.j.info("SVER="+h.za));const un=Tt[5];un!=null&&typeof un=="number"&&un>0&&(p=1.5*un,h.O=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const hn=o.g;if(hn){const ii=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var C=p.h;C.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(xo(C,C.h),C.h=null))}if(p.G){const Bo=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(p.wa=Bo,Rt(p.J,p.G,Bo))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-o.F,h.j.info("Handshake RTT: "+h.T+"ms")),p=h;var j=o;if(p.na=Rc(p,p.L?p.ba:null,p.W),j.L){rc(p.h,j);var ot=j,jt=p.O;jt&&(ot.H=jt),ot.D&&(Vo(ot),Ys(ot)),p.g=j}else Ic(p);h.i.length>0&&ni(h)}else Tt[0]!="stop"&&Tt[0]!="close"||Bn(h,7);else h.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Bn(h,7):Lo(h):Tt[0]!="noop"&&h.l&&h.l.qa(Tt),h.A=0)}}Hr(4)}catch{}}var Mp=class{constructor(o,c){this.g=o,this.map=c}};function tc(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ec(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function nc(o){return o.h?1:o.g?o.g.size:0}function No(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function xo(o,c){o.g?o.g.add(c):o.h=c}function rc(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}tc.prototype.cancel=function(){if(this.i=sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function sc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.G);return c}return S(o.i)}var ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kp(o,c){if(o){o=o.split("&");for(let h=0;h<o.length;h++){const p=o[h].indexOf("=");let R,C=null;p>=0?(R=o[h].substring(0,p),C=o[h].substring(p+1)):R=o[h],c(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function an(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof an?(this.l=o.l,Qr(this,o.j),this.o=o.o,this.g=o.g,Xr(this,o.u),this.h=o.h,Oo(this,hc(o.i)),this.m=o.m):o&&(c=String(o).match(ic))?(this.l=!1,Qr(this,c[1]||"",!0),this.o=Yr(c[2]||""),this.g=Yr(c[3]||"",!0),Xr(this,c[4]),this.h=Yr(c[5]||"",!0),Oo(this,c[6]||"",!0),this.m=Yr(c[7]||"")):(this.l=!1,this.i=new Zr(null,this.l))}an.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(Jr(c,oc,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Jr(c,oc,!0),"@"),o.push(Wr(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&o.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Jr(h,h.charAt(0)=="/"?Up:Fp,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Jr(h,jp)),o.join("")},an.prototype.resolve=function(o){const c=De(this);let h=!!o.j;h?Qr(c,o.j):h=!!o.o,h?c.o=o.o:h=!!o.g,h?c.g=o.g:h=o.u!=null;var p=o.h;if(h)Xr(c,o.u);else if(h=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var R=c.h.lastIndexOf("/");R!=-1&&(p=c.h.slice(0,R+1)+p)}if(R=p,R==".."||R==".")p="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){p=R.lastIndexOf("/",0)==0,R=R.split("/");const C=[];for(let j=0;j<R.length;){const ot=R[j++];ot=="."?p&&j==R.length&&C.push(""):ot==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),p&&j==R.length&&C.push("")):(C.push(ot),p=!0)}p=C.join("/")}else p=R}return h?c.h=p:h=o.i.toString()!=="",h?Oo(c,hc(o.i)):h=!!o.m,h&&(c.m=o.m),c};function De(o){return new an(o)}function Qr(o,c,h){o.j=h?Yr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Xr(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function Oo(o,c,h){c instanceof Zr?(o.i=c,$p(o.i,o.l)):(h||(c=Jr(c,Bp)),o.i=new Zr(c,o.l))}function Rt(o,c,h){o.i.set(c,h)}function Js(o){return Rt(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Yr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,Lp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Lp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var oc=/[#\/\?@]/g,Fp=/[#\?:]/g,Up=/[#\?]/g,Bp=/[#\?@]/g,jp=/#/g;function Zr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Un(o){o.g||(o.g=new Map,o.h=0,o.i&&kp(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}e=Zr.prototype,e.add=function(o,c){Un(this),this.i=null,o=ir(this,o);let h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function ac(o,c){Un(o),c=ir(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function lc(o,c){return Un(o),c=ir(o,c),o.g.has(c)}e.forEach=function(o,c){Un(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(c,R,p,this)},this)},this)};function cc(o,c){Un(o);let h=[];if(typeof c=="string")lc(o,c)&&(h=h.concat(o.g.get(ir(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)h=h.concat(o[c]);return h}e.set=function(o,c){return Un(this),this.i=null,o=ir(this,o),lc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=cc(this,o),o.length>0?String(o[0]):c):c};function uc(o,c,h){ac(o,c),h.length>0&&(o.i=null,o.g.set(ir(o,c),S(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let p=0;p<c.length;p++){var h=c[p];const R=Wr(h);h=cc(this,h);for(let C=0;C<h.length;C++){let j=R;h[C]!==""&&(j+="="+Wr(h[C])),o.push(j)}}return this.i=o.join("&")};function hc(o){const c=new Zr;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function ir(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function $p(o,c){c&&!o.j&&(Un(o),o.i=null,o.g.forEach(function(h,p){const R=p.toLowerCase();p!=R&&(ac(this,p),uc(this,R,h))},o)),o.j=c}function qp(o,c){const h=new Kr;if(a.Image){const p=new Image;p.onload=d(ln,h,"TestLoadImage: loaded",!0,c,p),p.onerror=d(ln,h,"TestLoadImage: error",!1,c,p),p.onabort=d(ln,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=d(ln,h,"TestLoadImage: timeout",!1,c,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function Hp(o,c){const h=new Kr,p=new AbortController,R=setTimeout(()=>{p.abort(),ln(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?ln(h,"TestPingServer: ok",!0,c):ln(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),ln(h,"TestPingServer: error",!1,c)})}function ln(o,c,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function zp(){this.g=new te}function Mo(o){this.i=o.Sb||null,this.h=o.ab||!1}g(Mo,de),Mo.prototype.g=function(){return new Zs(this.i,this.h)};function Zs(o,c){L.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Zs,L),e=Zs.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,es(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fc(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function fc(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ts(this):es(this),this.readyState==3&&fc(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,ts(this))},e.Na=function(o){this.g&&(this.response=o,ts(this))},e.ga=function(){this.g&&ts(this)};function ts(o){o.readyState=4,o.l=null,o.j=null,o.B=null,es(o)}e.setRequestHeader=function(o,c){this.A.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function es(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function dc(o){let c="";return ve(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function ko(o,c,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=dc(h),typeof o=="string"?h!=null&&Wr(h):Rt(o,c,h))}function Nt(o){L.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Nt,L);var Kp=/^https?$/i,Wp=["POST","PUT"];e=Nt.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gl.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(C){pc(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Wp,c,void 0)>=0)||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(C){pc(this,C)}};function pc(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,gc(o),ti(o)}function gc(o){o.A||(o.A=!0,k(o,"complete"),k(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,k(this,"complete"),k(this,"abort"),ti(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Nt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?mc(this):this.Xa())},e.Xa=function(){mc(this)};function mc(o){if(o.h&&typeof i<"u"){if(o.v&&cn(o)==4)setTimeout(o.Ca.bind(o),0);else if(k(o,"readystatechange"),cn(o)==4){o.h=!1;try{const C=o.ca();t:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var h;if(!(h=c)){var p;if(p=C===0){let j=String(o.D).match(ic)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),p=!Kp.test(j?j.toLowerCase():"")}h=p}if(h)k(o,"complete"),k(o,"success");else{o.o=6;try{var R=cn(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",gc(o)}}finally{ti(o)}}}}function ti(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const h=o.g;o.g=null,c||k(o,"ready");try{h.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function cn(o){return o.g?o.g.readyState:0}e.ca=function(){try{return cn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Zt(c)}};function _c(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Gp(o){const c={};o=(o.g&&cn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(y(o[p]))continue;var h=Np(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=c[R]||[];c[R]=C,C.push(h)}er(c,function(p){return p.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function yc(o){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ns("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ns("baseRetryDelayMs",5e3,o),this.Za=ns("retryDelaySeedMs",1e4,o),this.Ta=ns("forwardChannelMaxRetries",2,o),this.va=ns("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new tc(o&&o.concurrentRequestLimit),this.Ba=new zp,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=yc.prototype,e.ka=8,e.I=1,e.connect=function(o,c,h,p){le(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.J=Rc(this,null,this.W),ni(this)};function Lo(o){if(Ec(o),o.I==3){var c=o.V++,h=De(o.J);if(Rt(h,"SID",o.M),Rt(h,"RID",c),Rt(h,"TYPE","terminate"),rs(o,h),c=new on(o,o.j,c),c.M=2,c.A=Js(De(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!h&&a.Image&&(new Image().src=c.A,h=!0),h||(c.g=Cc(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ys(c)}Sc(o)}function ei(o){o.g&&(Uo(o),o.g.cancel(),o.g=null)}function Ec(o){ei(o),o.v&&(a.clearTimeout(o.v),o.v=null),ri(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ni(o){if(!ec(o.h)&&!o.m){o.m=!0;var c=o.Ea;rt||m(),Et||(rt(),Et=!0),w.add(c,o),o.D=0}}function Qp(o,c){return nc(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=zr(f(o.Ea,o,c),bc(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new on(this,this.j,o);let C=this.o;if(this.U&&(C?(C=Ve(C),Br(C,this.U)):C=this.U),this.u!==null||this.R||(R.J=C,C=null),this.S)t:{for(var c=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,c>4096){c=h;break t}if(c===4096||h===this.i.length-1){c=h+1;break t}}c=1e3}else c=1e3;c=Tc(this,R,c),h=De(this.J),Rt(h,"RID",o),Rt(h,"CVER",22),this.G&&Rt(h,"X-HTTP-Session-Id",this.G),rs(this,h),C&&(this.R?c="headers="+Wr(dc(C))+"&"+c:this.u&&ko(h,this.u,C)),xo(this.h,R),this.Ra&&Rt(h,"TYPE","init"),this.S?(Rt(h,"$req",c),Rt(h,"SID","null"),R.U=!0,Po(R,h,null)):Po(R,h,c),this.I=2}}else this.I==3&&(o?vc(this,o):this.i.length==0||ec(this.h)||vc(this))};function vc(o,c){var h;c?h=c.l:h=o.V++;const p=De(o.J);Rt(p,"SID",o.M),Rt(p,"RID",h),Rt(p,"AID",o.K),rs(o,p),o.u&&o.o&&ko(p,o.u,o.o),h=new on(o,o.j,h,o.D+1),o.u===null&&(h.J=o.o),c&&(o.i=c.G.concat(o.i)),c=Tc(o,h,1e3),h.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),xo(o.h,h),Po(h,p,c)}function rs(o,c){o.H&&ve(o.H,function(h,p){Rt(c,p,h)}),o.l&&ve({},function(h,p){Rt(c,p,h)})}function Tc(o,c,h){h=Math.min(o.i.length,h);const p=o.l?f(o.l.Ka,o.l,o):null;t:{var R=o.i;let ot=-1;for(;;){const jt=["count="+h];ot==-1?h>0?(ot=R[0].g,jt.push("ofs="+ot)):ot=0:jt.push("ofs="+ot);let Tt=!0;for(let Ht=0;Ht<h;Ht++){var C=R[Ht].g;const Ne=R[Ht].map;if(C-=ot,C<0)ot=Math.max(0,R[Ht].g-100),Tt=!1;else try{C="req"+C+"_"||"";try{var j=Ne instanceof Map?Ne:Object.entries(Ne);for(const[jn,un]of j){let hn=un;l(un)&&(hn=dt(un)),jt.push(C+jn+"="+encodeURIComponent(hn))}}catch(jn){throw jt.push(C+"type="+encodeURIComponent("_badmap")),jn}}catch{p&&p(Ne)}}if(Tt){j=jt.join("&");break t}}j=void 0}return o=o.i.splice(0,h),c.G=o,j}function Ic(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;rt||m(),Et||(rt(),Et=!0),w.add(c,o),o.A=0}}function Fo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=zr(f(o.Da,o),bc(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=zr(f(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,le(10),ei(this),wc(this))};function Uo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function wc(o){o.g=new on(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=De(o.na);Rt(c,"RID","rpc"),Rt(c,"SID",o.M),Rt(c,"AID",o.K),Rt(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&Rt(c,"TO",o.ia),Rt(c,"TYPE","xmlhttp"),rs(o,c),o.u&&o.o&&ko(c,o.u,o.o),o.O&&(o.g.H=o.O);var h=o.g;o=o.ba,h.M=1,h.A=Js(De(c)),h.u=null,h.R=!0,Yl(h,o)}e.Va=function(){this.C!=null&&(this.C=null,ei(this),Fo(this),le(19))};function ri(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Ac(o,c){var h=null;if(o.g==c){ri(o),Uo(o),o.g=null;var p=2}else if(No(o.h,c))h=c.G,rc(o.h,c),p=1;else return;if(o.I!=0){if(c.o)if(p==1){h=c.u?c.u.length:0,c=Date.now()-c.F;var R=o.D;p=Ln(),k(p,new Kl(p,h)),ni(o)}else Ic(o);else if(R=c.m,R==3||R==0&&c.X>0||!(p==1&&Qp(o,c)||p==2&&Fo(o)))switch(h&&h.length>0&&(c=o.h,c.i=c.i.concat(h)),R){case 1:Bn(o,5);break;case 4:Bn(o,10);break;case 3:Bn(o,6);break;default:Bn(o,2)}}}function bc(o,c){let h=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(h*=2),h*c}function Bn(o,c){if(o.j.info("Error code "+c),c==2){var h=f(o.bb,o),p=o.Ua;const R=!p;p=new an(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qr(p,"https"),Js(p),R?qp(p.toString(),h):Hp(p.toString(),h)}else le(2);o.I=0,o.l&&o.l.pa(c),Sc(o),Ec(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Sc(o){if(o.I=0,o.ja=[],o.l){const c=sc(o.h);(c.length!=0||o.i.length!=0)&&(x(o.ja,c),x(o.ja,o.i),o.h.i.length=0,S(o.i),o.i.length=0),o.l.oa()}}function Rc(o,c,h){var p=h instanceof an?De(h):new an(h);if(p.g!="")c&&(p.g=c+"."+p.g),Xr(p,p.u);else{var R=a.location;p=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;const C=new an(null);p&&Qr(C,p),c&&(C.g=c),R&&Xr(C,R),h&&(C.h=h),p=C}return h=o.G,c=o.wa,h&&c&&Rt(p,h,c),Rt(p,"VER",o.ka),rs(o,p),p}function Cc(o,c,h){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Nt(new Mo({ab:h})):new Nt(o.ma),c.Fa(o.L),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}e=Pc.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function si(){}si.prototype.g=function(o,c){return new ge(o,c)};function ge(o,c){L.call(this),this.g=new yc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!y(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!y(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new or(this)}g(ge,L),ge.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Lo(this.g)},ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.v&&(h={},h.__data__=dt(o),o=h);c.i.push(new Mp(c.Ya++,o)),c.I==3&&ni(c)},ge.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,ge.Z.N.call(this)};function Vc(o){rr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const h in c){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}g(Vc,rr);function Dc(){Wt.call(this),this.status=1}g(Dc,Wt);function or(o){this.g=o}g(or,Pc),or.prototype.ra=function(){k(this.g,"a")},or.prototype.qa=function(o){k(this.g,new Vc(o))},or.prototype.pa=function(o){k(this.g,new Dc)},or.prototype.oa=function(){k(this.g,"b")},si.prototype.createWebChannel=si.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,Yf=function(){return new si},Xf=function(){return Ln()},Qf=qt,Sa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xs.NO_ERROR=0,Xs.TIMEOUT=8,Xs.HTTP_ERROR=6,Ii=Xs,Wl.COMPLETE="complete",Gf=Wl,pe.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",L.prototype.listen=L.prototype.J,cs=pe,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,Wf=Nt}).apply(typeof ui<"u"?ui:typeof self<"u"?self:typeof window<"u"?window:{});const Su="@firebase/firestore",Ru="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}re.UNAUTHENTICATED=new re(null),re.GOOGLE_CREDENTIALS=new re("google-credentials-uid"),re.FIRST_PARTY=new re("first-party-uid"),re.MOCK_USER=new re("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Bf("@firebase/firestore");function hr(){return Qn.logLevel}function H(e,...t){if(Qn.logLevel<=ft.DEBUG){const n=t.map(fl);Qn.debug(`Firestore (${Mr}): ${e}`,...n)}}function en(e,...t){if(Qn.logLevel<=ft.ERROR){const n=t.map(fl);Qn.error(`Firestore (${Mr}): ${e}`,...n)}}function Rr(e,...t){if(Qn.logLevel<=ft.WARN){const n=t.map(fl);Qn.warn(`Firestore (${Mr}): ${e}`,...n)}}function fl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Jf(e,r,n)}function Jf(e,t,n){let r=`FIRESTORE (${Mr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw en(r),new Error(r)}function yt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||Jf(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Or{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(re.UNAUTHENTICATED)))}shutdown(){}}class HE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class zE{constructor(t){this.t=t,this.currentUser=re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new An;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new An,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;t.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new An)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new Zf(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new re(t)}}class KE{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WE{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new KE(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(re.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GE{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,CE(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Ra(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return ra(s)===ra(i)?ct(s,i):ra(s)?1:-1}return ct(e.length,t.length)}const XE=55296,YE=57343;function ra(e){const t=e.charCodeAt(0);return t>=XE&&t<=YE}function Cr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="__name__";class Me{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Me.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Me?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Me.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ct(t.length,n.length)}static compareSegments(t,n){const r=Me.isNumericId(t),s=Me.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Me.extractNumericId(t).compare(Me.extractNumericId(n)):Ra(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wn.fromString(t.substring(4,t.length-2))}}class bt extends Me{construct(t,n,r){return new bt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const JE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Me{construct(t,n,r){return new Xt(t,n,r)}static isValidIdentifier(t){return JE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pu}static keyField(){return new Xt([Pu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.path=t}static fromPath(t){return new X(bt.fromString(t))}static fromName(t){return new X(bt.fromString(t).popFirst(5))}static empty(){return new X(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return bt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new X(new bt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e,t,n){if(!n)throw new z(V.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ZE(e,t,n,r){if(t===!0&&r===!0)throw new z(V.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Vu(e){if(!X.isDocumentKey(e))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Du(e){if(X.isDocumentKey(e))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ed(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function po(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function Bi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=po(e);throw new z(V.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(e,t){const n={typeString:e};return t&&(n.value=t),n}function Hs(e,t){if(!ed(e))throw new z(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new z(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-62135596800,xu=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(t){return Pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*xu);return new Pt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Nu)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xu}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Hs(t,Pt._jsonSchema))return new Pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Nu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Ut("string",Pt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(t){return new nt(t)}static min(){return new nt(new Pt(0,0))}static max(){return new nt(new Pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=-1;function tv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new Rn(s,X.empty(),t)}function ev(e){return new Rn(e.readTime,e.key,Os)}class Rn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(nt.min(),X.empty(),Os)}static max(){return new Rn(nt.max(),X.empty(),Os)}}function nv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=X.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(e){if(e.code!==V.FAILED_PRECONDITION||e.message!==rv)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):D.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):D.reject(n)}static resolve(t){return new D(((n,r)=>{n(t)}))}static reject(t){return new D(((n,r)=>{r(t)}))}static waitFor(t){return new D(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(t){let n=D.resolve(!1);for(const r of t)n=n.next((s=>s?D.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new D(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new D(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function iv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}go.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function mo(e){return e==null}function ji(e){return e===0&&1/e==-1/0}function ov(e){return typeof e=="number"&&Number.isInteger(e)&&!ji(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="";function av(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ou(t)),t=lv(e.get(n),t);return Ou(t)}function lv(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case nd:n+="";break;default:n+=i}}return n}function Ou(e){return e+nd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){this.comparator=t,this.root=n||Gt.EMPTY}insert(t,n){return new Dt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(t){return new Dt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hi(this.root,t,this.comparator,!1)}getReverseIterator(){return new hi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hi(this.root,t,this.comparator,!0)}}class hi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Gt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Gt.RED,this.left=s??Gt.EMPTY,this.right=i??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Gt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Gt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new Dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ku(this.data.getIterator())}getIteratorFrom(t){return new ku(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new $t(this.comparator);return n.data=t,n}}class ku{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t){this.fields=t,t.sort(Xt.comparator)}static empty(){return new Se([])}unionWith(t){let n=new $t(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Se(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Cr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sd("Invalid base64 string: "+i):i}})(t);return new Jt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Jt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const cv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=cv.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xt(e.seconds),nanos:xt(e.nanos)}}function xt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Pn(e){return typeof e=="string"?Jt.fromBase64String(e):Jt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="server_timestamp",od="__type__",ad="__previous_value__",ld="__local_write_time__";function gl(e){var n,r;return((r=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[od])==null?void 0:r.stringValue)===id}function _o(e){const t=e.mapValue.fields[ad];return gl(t)?_o(t):t}function Ms(e){const t=Cn(e.mapValue.fields[ld].timestampValue);return new Pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t,n,r,s,i,a,l,u,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const $i="(default)";class ks{constructor(t,n){this.projectId=t,this.database=n||$i}static empty(){return new ks("","")}get isDefaultDatabase(){return this.database===$i}isEqual(t){return t instanceof ks&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="__type__",hv="__max__",fi={mapValue:{}},ud="__vector__",qi="value";function Vn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gl(e)?4:dv(e)?9007199254740991:fv(e)?10:11:tt(28295,{value:e})}function qe(e,t){if(e===t)return!0;const n=Vn(e);if(n!==Vn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ms(e).isEqual(Ms(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Cn(s.timestampValue),l=Cn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Pn(s.bytesValue).isEqual(Pn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return xt(s.geoPointValue.latitude)===xt(i.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return xt(s.integerValue)===xt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=xt(s.doubleValue),l=xt(i.doubleValue);return a===l?ji(a)===ji(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Cr(e.arrayValue.values||[],t.arrayValue.values||[],qe);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Mu(a)!==Mu(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!qe(a[u],l[u])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function Ls(e,t){return(e.values||[]).find((n=>qe(n,t)))!==void 0}function Pr(e,t){if(e===t)return 0;const n=Vn(e),r=Vn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=xt(i.integerValue||i.doubleValue),u=xt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(e,t);case 3:return Lu(e.timestampValue,t.timestampValue);case 4:return Lu(Ms(e),Ms(t));case 5:return Ra(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Pn(i),u=Pn(a);return l.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ct(l[f],u[f]);if(d!==0)return d}return ct(l.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ct(xt(i.latitude),xt(a.latitude));return l!==0?l:ct(xt(i.longitude),xt(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Fu(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var v,S,x,U;const l=i.fields||{},u=a.fields||{},f=(v=l[qi])==null?void 0:v.arrayValue,d=(S=u[qi])==null?void 0:S.arrayValue,g=ct(((x=f==null?void 0:f.values)==null?void 0:x.length)||0,((U=d==null?void 0:d.values)==null?void 0:U.length)||0);return g!==0?g:Fu(f,d)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===fi.mapValue&&a===fi.mapValue)return 0;if(i===fi.mapValue)return 1;if(a===fi.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const v=Ra(u[g],d[g]);if(v!==0)return v;const S=Pr(l[u[g]],f[d[g]]);if(S!==0)return S}return ct(u.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{he:n})}}function Lu(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Cn(e),r=Cn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Fu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Pr(n[s],r[s]);if(i)return i}return ct(n.length,r.length)}function Vr(e){return Ca(e)}function Ca(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Cn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Pn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return X.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ca(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ca(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function wi(e){switch(Vn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_o(e);return t?16+wi(t):16;case 5:return 2*e.stringValue.length;case 6:return Pn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+wi(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return Yn(r.fields,((i,a)=>{s+=i.length+wi(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Uu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Pa(e){return!!e&&"integerValue"in e}function ml(e){return!!e&&"arrayValue"in e}function Bu(e){return!!e&&"nullValue"in e}function ju(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ai(e){return!!e&&"mapValue"in e}function fv(e){var n,r;return((r=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[cd])==null?void 0:r.stringValue)===ud}function Is(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Yn(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Is(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Is(e.arrayValue.values[n]);return t}return{...e}}function dv(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===hv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.value=t}static empty(){return new Te({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ai(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Is(n)}setAll(t){let n=Xt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Is(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ai(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ai(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Yn(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Te(Is(this.value))}}function hd(e){const t=[];return Yn(e.fields,((n,r)=>{const s=new Xt([n]);if(Ai(r)){const i=hd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Se(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,nt.min(),nt.min(),nt.min(),Te.empty(),0)}static newFoundDocument(t,n,r,s){return new ie(t,1,n,nt.min(),r,s,0)}static newNoDocument(t,n){return new ie(t,2,n,nt.min(),nt.min(),Te.empty(),0)}static newUnknownDocument(t,n){return new ie(t,3,n,nt.min(),nt.min(),Te.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Te.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Te.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n){this.position=t,this.inclusive=n}}function $u(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Pr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qu(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,n="asc"){this.field=t,this.dir=n}}function pv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{}class Ft extends fd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new mv(t,n,r):n==="array-contains"?new Ev(t,r):n==="in"?new vv(t,r):n==="not-in"?new Tv(t,r):n==="array-contains-any"?new Iv(t,r):new Ft(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new _v(t,r):new yv(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pr(n,this.value)):n!==null&&Vn(this.value)===Vn(n)&&this.matchesComparison(Pr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends fd{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Pe(t,n)}matches(t){return dd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dd(e){return e.op==="and"}function pd(e){return gv(e)&&dd(e)}function gv(e){for(const t of e.filters)if(t instanceof Pe)return!1;return!0}function Va(e){if(e instanceof Ft)return e.field.canonicalString()+e.op.toString()+Vr(e.value);if(pd(e))return e.filters.map((t=>Va(t))).join(",");{const t=e.filters.map((n=>Va(n))).join(",");return`${e.op}(${t})`}}function gd(e,t){return e instanceof Ft?(function(r,s){return s instanceof Ft&&r.op===s.op&&r.field.isEqual(s.field)&&qe(r.value,s.value)})(e,t):e instanceof Pe?(function(r,s){return s instanceof Pe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&gd(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function md(e){return e instanceof Ft?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vr(n.value)}`})(e):e instanceof Pe?(function(n){return n.op.toString()+" {"+n.getFilters().map(md).join(" ,")+"}"})(e):"Filter"}class mv extends Ft{constructor(t,n,r){super(t,n,r),this.key=X.fromName(r.referenceValue)}matches(t){const n=X.comparator(t.key,this.key);return this.matchesComparison(n)}}class _v extends Ft{constructor(t,n){super(t,"in",n),this.keys=_d("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class yv extends Ft{constructor(t,n){super(t,"not-in",n),this.keys=_d("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function _d(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>X.fromName(r.referenceValue)))}class Ev extends Ft{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ml(n)&&Ls(n.arrayValue,this.value)}}class vv extends Ft{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ls(this.value.arrayValue,n)}}class Tv extends Ft{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ls(this.value.arrayValue,n)}}class Iv extends Ft{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ml(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ls(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Hu(e,t=null,n=[],r=[],s=null,i=null,a=null){return new wv(e,t,n,r,s,i,a)}function _l(e){const t=st(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Va(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),mo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Vr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Vr(r))).join(",")),t.Te=n}return t.Te}function yl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!pv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qu(e.startAt,t.startAt)&&qu(e.endAt,t.endAt)}function Da(e){return X.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Av(e,t,n,r,s,i,a,l){return new zs(e,t,n,r,s,i,a,l)}function yd(e){return new zs(e)}function zu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Ed(e){return e.collectionGroup!==null}function ws(e){const t=st(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $t(Xt.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new zi(i,r))})),n.has(Xt.keyField().canonicalString())||t.Ie.push(new zi(Xt.keyField(),r))}return t.Ie}function Fe(e){const t=st(e);return t.Ee||(t.Ee=bv(t,ws(e))),t.Ee}function bv(e,t){if(e.limitType==="F")return Hu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new zi(s.field,i)}));const n=e.endAt?new Hi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hi(e.startAt.position,e.startAt.inclusive):null;return Hu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Na(e,t){const n=e.filters.concat([t]);return new zs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xa(e,t,n){return new zs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yo(e,t){return yl(Fe(e),Fe(t))&&e.limitType===t.limitType}function vd(e){return`${_l(Fe(e))}|lt:${e.limitType}`}function fr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>md(s))).join(", ")}]`),mo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Vr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Vr(s))).join(",")),`Target(${r})`})(Fe(e))}; limitType=${e.limitType})`}function Eo(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of ws(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=$u(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,ws(r),s)||r.endAt&&!(function(a,l,u){const f=$u(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,ws(r),s))})(e,t)}function Sv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Td(e){return(t,n)=>{let r=!1;for(const s of ws(e)){const i=Rv(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Rv(e,t,n){const r=e.field.isKeyField()?X.comparator(t.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?Pr(u,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Yn(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return rd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Dt(X.comparator);function nn(){return Cv}const Id=new Dt(X.comparator);function us(...e){let t=Id;for(const n of e)t=t.insert(n.key,n);return t}function wd(e){let t=Id;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Kn(){return As()}function Ad(){return As()}function As(){return new Jn((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Pv=new Dt(X.comparator),Vv=new $t(X.comparator);function ut(...e){let t=Vv;for(const n of e)t=t.add(n);return t}const Dv=new $t(ct);function Nv(){return Dv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ji(t)?"-0":t}}function bd(e){return{integerValue:""+e}}function xv(e,t){return ov(t)?bd(t):El(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this._=void 0}}function Ov(e,t,n){return e instanceof Ki?(function(s,i){const a={fields:{[od]:{stringValue:id},[ld]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gl(i)&&(i=_o(i)),i&&(a.fields[ad]=i),{mapValue:a}})(n,t):e instanceof Fs?Rd(e,t):e instanceof Us?Cd(e,t):(function(s,i){const a=Sd(s,i),l=Ku(a)+Ku(s.Ae);return Pa(a)&&Pa(s.Ae)?bd(l):El(s.serializer,l)})(e,t)}function Mv(e,t,n){return e instanceof Fs?Rd(e,t):e instanceof Us?Cd(e,t):n}function Sd(e,t){return e instanceof Wi?(function(r){return Pa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Ki extends vo{}class Fs extends vo{constructor(t){super(),this.elements=t}}function Rd(e,t){const n=Pd(t);for(const r of e.elements)n.some((s=>qe(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Us extends vo{constructor(t){super(),this.elements=t}}function Cd(e,t){let n=Pd(t);for(const r of e.elements)n=n.filter((s=>!qe(s,r)));return{arrayValue:{values:n}}}class Wi extends vo{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Ku(e){return xt(e.integerValue||e.doubleValue)}function Pd(e){return ml(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function kv(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Fs&&s instanceof Fs||r instanceof Us&&s instanceof Us?Cr(r.elements,s.elements,qe):r instanceof Wi&&s instanceof Wi?qe(r.Ae,s.Ae):r instanceof Ki&&s instanceof Ki})(e.transform,t.transform)}class Lv{constructor(t,n){this.version=t,this.transformResults=n}}class Xe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Xe}static exists(t){return new Xe(void 0,t)}static updateTime(t){return new Xe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class To{}function Vd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Nd(e.key,Xe.none()):new Ks(e.key,e.data,Xe.none());{const n=e.data,r=Te.empty();let s=new $t(Xt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Zn(e.key,r,new Se(s.toArray()),Xe.none())}}function Fv(e,t,n){e instanceof Ks?(function(s,i,a){const l=s.value.clone(),u=Gu(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof Zn?(function(s,i,a){if(!bi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Gu(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Dd(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function bs(e,t,n,r){return e instanceof Ks?(function(i,a,l,u){if(!bi(i.precondition,a))return l;const f=i.value.clone(),d=Qu(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof Zn?(function(i,a,l,u){if(!bi(i.precondition,a))return l;const f=Qu(i.fieldTransforms,u,a),d=a.data;return d.setAll(Dd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(e,t,n,r):(function(i,a,l){return bi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function Uv(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Sd(r.transform,s||null);i!=null&&(n===null&&(n=Te.empty()),n.set(r.field,i))}return n||null}function Wu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cr(r,s,((i,a)=>kv(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ks extends To{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zn extends To{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Gu(e,t,n){const r=new Map;yt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,Mv(a,l,n[s]))}return r}function Qu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Ov(i,a,t))}return r}class Nd extends To{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bv extends To{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&Fv(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=bs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=bs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Ad();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Vd(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ut())}isEqual(t){return this.batchId===t.batchId&&Cr(this.mutations,t.mutations,((n,r)=>Wu(n,r)))&&Cr(this.baseMutations,t.baseMutations,((n,r)=>Wu(n,r)))}}class vl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){yt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return Pv})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new vl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,ht;function Hv(e){switch(e){case V.OK:return tt(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function xd(e){if(e===void 0)return en("GRPC error has no .code"),V.UNKNOWN;switch(e){case Lt.OK:return V.OK;case Lt.CANCELLED:return V.CANCELLED;case Lt.UNKNOWN:return V.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return V.INTERNAL;case Lt.UNAVAILABLE:return V.UNAVAILABLE;case Lt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Lt.NOT_FOUND:return V.NOT_FOUND;case Lt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Lt.ABORTED:return V.ABORTED;case Lt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Lt.DATA_LOSS:return V.DATA_LOSS;default:return tt(39323,{code:e})}}(ht=Lt||(Lt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new wn([4294967295,4294967295],0);function Xu(e){const t=zv().encode(e),n=new Kf;return n.update(t),new Uint8Array(n.digest())}function Yu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new wn([n,r],0),new wn([s,i],0)]}class Tl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hs(`Invalid padding: ${n}`);if(r<0)throw new hs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new hs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new hs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=wn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(wn.fromNumber(r)));return s.compare(Kv)===1&&(s=new wn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Xu(t),[r,s]=Yu(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Tl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=Xu(t),[r,s]=Yu(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ws.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Io(nt.min(),s,new Dt(ct),nn(),ut())}}class Ws{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ws(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class Od{constructor(t,n){this.targetId=t,this.Ce=n}}class Md{constructor(t,n,r=Jt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ju{constructor(){this.ve=0,this.Fe=Zu(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),r=ut();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new Ws(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Zu()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wv{constructor(t){this.Ge=t,this.ze=new Map,this.je=nn(),this.Je=di(),this.He=di(),this.Ye=new Dt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Da(i))if(r===0){const a=new X(i.path);this.et(n,a,ie.newNoDocument(a,nt.min()))}else yt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Pn(r).toUint8Array()}catch(u){if(u instanceof sd)return Rr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tl(a,s,i)}catch(u){return Rr(u instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Da(l.target)){const u=new X(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ie.newNoDocument(u,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=ut();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new Io(t,n,this.Ye,this.je,r);return this.je=nn(),this.Je=di(),this.He=di(),this.Ye=new Dt(ct),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Ju,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new $t(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new $t(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Ju),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function di(){return new Dt(X.comparator)}function Zu(){return new Dt(X.comparator)}const Gv={asc:"ASCENDING",desc:"DESCENDING"},Qv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xv={and:"AND",or:"OR"};class Yv{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Oa(e,t){return e.useProto3Json||mo(t)?t:{value:t}}function Gi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Jv(e,t){return Gi(e,t.toTimestamp())}function Ue(e){return yt(!!e,49232),nt.fromTimestamp((function(n){const r=Cn(n);return new Pt(r.seconds,r.nanos)})(e))}function Il(e,t){return Ma(e,t).canonicalString()}function Ma(e,t){const n=(function(s){return new bt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Ld(e){const t=bt.fromString(e);return yt($d(t),10190,{key:t.toString()}),t}function ka(e,t){return Il(e.databaseId,t.path)}function sa(e,t){const n=Ld(t);if(n.get(1)!==e.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new X(Ud(n))}function Fd(e,t){return Il(e.databaseId,t)}function Zv(e){const t=Ld(e);return t.length===4?bt.emptyPath():Ud(t)}function La(e){return new bt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ud(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function th(e,t,n){return{name:ka(e,t),fields:n.value.mapValue.fields}}function tT(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(yt(d===void 0||typeof d=="string",58123),Jt.fromBase64String(d||"")):(yt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Jt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?V.UNKNOWN:xd(f.code);return new z(d,f.message||"")})(a);n=new Md(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=sa(e,r.document.name),i=Ue(r.document.updateTime),a=r.document.createTime?Ue(r.document.createTime):nt.min(),l=new Te({mapValue:{fields:r.document.fields}}),u=ie.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Si(f,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=sa(e,r.document),i=r.readTime?Ue(r.readTime):nt.min(),a=ie.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Si([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=sa(e,r.document),i=r.removedTargetIds||[];n=new Si([],i,s,null)}else{if(!("filter"in t))return tt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new qv(s,i),l=r.targetId;n=new Od(l,a)}}return n}function eT(e,t){let n;if(t instanceof Ks)n={update:th(e,t.key,t.value)};else if(t instanceof Nd)n={delete:ka(e,t.key)};else if(t instanceof Zn)n={update:th(e,t.key,t.data),updateMask:uT(t.fieldMask)};else{if(!(t instanceof Bv))return tt(16599,{Vt:t.type});n={verify:ka(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Ki)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Us)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:Jv(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function nT(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Ue(s.updateTime):Ue(i);return a.isEqual(nt.min())&&(a=Ue(i)),new Lv(a,s.transformResults||[])})(n,t)))):[]}function rT(e,t){return{documents:[Fd(e,t.path)]}}function sT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fd(e,s);const i=(function(f){if(f.length!==0)return jd(Pe.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:dr(v.field),direction:aT(v.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Oa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:n,parent:s}}function iT(e){let t=Zv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(g){const v=Bd(g);return v instanceof Pe&&pd(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(g){return g.map((v=>(function(x){return new zi(pr(x.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,mo(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(g){const v=!!g.before,S=g.values||[];return new Hi(S,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const v=!g.before,S=g.values||[];return new Hi(S,v)})(n.endAt)),Av(t,s,a,i,l,"F",u,f)}function oT(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Bd(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pr(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pr(n.unaryFilter.field);return Ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pr(n.unaryFilter.field);return Ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pr(n.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Ft.create(pr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Pe.create(n.compositeFilter.filters.map((r=>Bd(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function aT(e){return Gv[e]}function lT(e){return Qv[e]}function cT(e){return Xv[e]}function dr(e){return{fieldPath:e.canonicalString()}}function pr(e){return Xt.fromServerFormat(e.fieldPath)}function jd(e){return e instanceof Ft?(function(n){if(n.op==="=="){if(ju(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NAN"}};if(Bu(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ju(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NAN"}};if(Bu(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(n.field),op:lT(n.op),value:n.value}}})(e):e instanceof Pe?(function(n){const r=n.getFilters().map((s=>jd(s)));return r.length===1?r[0]:{compositeFilter:{op:cT(n.op),filters:r}}})(e):tt(54877,{filter:e})}function uT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function $d(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,s,i=nt.min(),a=nt.min(),l=Jt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new yn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t){this.yt=t}}function fT(e){const t=iT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.Cn=new pT}addToCollectionParentIndex(t,n){return this.Cn.add(n),D.resolve()}getCollectionParents(t,n){return D.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return D.resolve()}deleteFieldIndex(t,n){return D.resolve()}deleteAllFieldIndexes(t){return D.resolve()}createTargetIndexes(t,n){return D.resolve()}getDocumentsMatchingTarget(t,n){return D.resolve(null)}getIndexType(t,n){return D.resolve(0)}getFieldIndexes(t,n){return D.resolve([])}getNextCollectionGroupToUpdate(t){return D.resolve(null)}getMinOffset(t,n){return D.resolve(Rn.min())}getMinOffsetFromCollectionGroup(t,n){return D.resolve(Rn.min())}updateCollectionGroup(t,n,r){return D.resolve()}updateIndexEntries(t,n){return D.resolve()}}class pT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new $t(bt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new $t(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qd=41943040;class he{static withCacheSize(t){return new he(t,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */he.DEFAULT_COLLECTION_PERCENTILE=10,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,he.DEFAULT=new he(qd,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),he.DISABLED=new he(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Dr(0)}static cr(){return new Dr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="LruGarbageCollector",gT=1048576;function rh([e,t],[n,r]){const s=ct(e,n);return s===0?ct(t,r):s}class mT{constructor(t){this.Ir=t,this.buffer=new $t(rh),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _T{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(nh,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lr(n)?H(nh,"Ignoring IndexedDB error during garbage collection: ",n):await kr(n)}await this.Vr(3e5)}))}}class yT{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return D.resolve(go.ce);const r=new mT(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(eh)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eh):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,u,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s)))).next((g=>(r=g,l=Date.now(),this.removeTargets(t,r,n)))).next((g=>(i=g,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((g=>(f=Date.now(),hr()<=ft.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g}))))}}function ET(e,t){return new yT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.changes=new Jn((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&bs(r.mutation,s,Se.empty(),Pt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ut()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ut()){const s=Kn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=us();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=Kn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ut())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=nn();const a=As(),l=(function(){return As()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Zn)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),bs(d.mutation,f,d.mutation.getFieldMask(),Pt.now())):a.set(f.key,Se.empty())})),this.recalculateAndSaveOverlays(t,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>l.set(f,new TT(d,a.get(f)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=As();let s=new Dt(((a,l)=>a-l)),i=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||Se.empty();d=l.applyToLocalView(f,d),r.set(u,d);const g=(s.get(l.batchId)||ut()).add(u);s=s.insert(l.batchId,g)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,g=Ad();d.forEach((v=>{if(!i.has(v)){const S=Vd(n.get(v),r.get(v));S!==null&&g.set(v,S),i=i.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,g))}return D.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Ed(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):D.resolve(Kn());let l=Os,u=i;return a.next((f=>D.forEach(f,((d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(t,d).next((v=>{u=u.insert(d,v)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,u,f,ut()))).next((d=>({batchId:l,changes:wd(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new X(n)).next((r=>{let s=us();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=us();return this.indexManager.getCollectionParents(t,i).next((l=>D.forEach(l,(u=>{const f=(function(g,v){return new zs(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((g,v)=>{a=a.insert(g,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ie.newInvalidDocument(d)))}));let l=us();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&bs(d.mutation,f,Se.empty(),Pt.now()),Eo(n,f)&&(l=l.insert(u,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return D.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ue(s.createTime)}})(n)),D.resolve()}getNamedQuery(t,n){return D.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:fT(s.bundledQuery),readTime:Ue(s.readTime)}})(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.overlays=new Dt(X.comparator),this.qr=new Map}getOverlay(t,n){return D.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Kn();return D.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),D.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),D.resolve()}getOverlaysForCollection(t,n,r){const s=Kn(),i=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return D.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Dt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Kn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Kn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return D.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $v(n,r));let i=this.qr.get(n);i===void 0&&(i=ut(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(t){return D.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.Qr=new $t(zt.$r),this.Ur=new $t(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new zt(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new zt(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new X(new bt([])),r=new zt(n,t),s=new zt(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new X(new bt([])),r=new zt(n,t),s=new zt(n,t+1);let i=ut();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new zt(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class zt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return X.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||X.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new $t(zt.$r)}checkEmpty(t){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jv(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new zt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return D.resolve(a)}lookupMutationBatch(t,n){return D.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?pl:this.tr-1)}getAllMutationBatches(t){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $t(ct);return n.forEach((s=>{const i=new zt(s,0),a=new zt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),D.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const a=new zt(new X(i),0);let l=new $t(ct);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)}),a),D.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return D.forEach(n.mutations,(s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new zt(n,0),s=this.Zr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,D.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this.ri=t,this.docs=(function(){return new Dt(X.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(n))}getEntries(t,n){let r=nn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ie.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=nn();const a=n.path,l=new X(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||nv(ev(d),r)<=0||(s.has(d.key)||Eo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ii(t,n){return D.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new CT(this)}getSize(t){return D.resolve(this.size)}}class CT extends vT{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),D.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t){this.persistence=t,this.si=new Jn((n=>_l(n)),yl),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new wl,this.targetCount=0,this.ai=Dr.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),D.resolve()}getLastRemoteSnapshotVersion(t){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return D.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),D.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Dr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,D.resolve()}updateTargetData(t,n){return this.Pr(n),D.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(t){return D.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return D.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),D.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),D.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),D.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return D.resolve(r)}containsKey(t,n){return D.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t,n){this.ui={},this.overlays={},this.ci=new go(0),this.li=!1,this.li=!0,this.hi=new bT,this.referenceDelegate=t(this),this.Pi=new PT(this),this.indexManager=new dT,this.remoteDocumentCache=(function(s){return new RT(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new hT(n),this.Ii=new wT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new AT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new ST(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new VT(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return D.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class VT extends sv{constructor(t){super(),this.currentSequenceNumber=t}}class Al{constructor(t){this.persistence=t,this.Ri=new wl,this.Vi=null}static mi(t){return new Al(t)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),D.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),D.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.fi,(r=>{const s=X.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,nt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return D.or([()=>D.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Qi{constructor(t,n){this.persistence=t,this.pi=new Jn((r=>av(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=ET(this,n)}static mi(t,n){return new Qi(t,n)}Ei(){}di(t){return D.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return D.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?D.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,nt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),D.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),D.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),D.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),D.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=wi(t.data.value)),n}br(t,n,r){return D.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=ut(),s=ut();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return by()?8:iv(wy())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new DT;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(hr()<=ft.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),D.resolve()):(hr()<=ft.DEBUG&&H("QueryEngine","Query:",fr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(hr()<=ft.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fe(n))):D.resolve())}ys(t,n){if(zu(n))return D.resolve(null);let r=Fe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=xa(n,null,"F"),r=Fe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ut(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(t,xa(n,null,"F")):this.vs(t,f,n,u)}))))})))))}ws(t,n,r,s){return zu(n)||s.isEqual(nt.min())?D.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?D.resolve(null):(hr()<=ft.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fr(n)),this.vs(t,a,n,tv(s,Os)).next((l=>l)))}))}Ds(t,n){let r=new $t(Td(t));return n.forEach(((s,i)=>{Eo(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return hr()<=ft.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",fr(n)),this.ps.getDocumentsMatchingQuery(t,n,Rn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="LocalStore",xT=3e8;class OT{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Dt(ct),this.xs=new Jn((i=>_l(i)),yl),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new IT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function MT(e,t,n,r){return new OT(e,t,n,r)}async function zd(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=ut();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function kT(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const g=f.batch,v=g.keys();let S=D.resolve();return v.forEach((x=>{S=S.next((()=>d.getEntry(u,x))).next((U=>{const B=f.docVersions.get(x);yt(B!==null,48541),U.version.compareTo(B)<0&&(g.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),d.addEntry(U)))}))})),S.next((()=>l.mutationQueue.removeMutationBatch(u,g)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=ut();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Kd(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function LT(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((d,g)=>{const v=s.get(g);if(!v)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,g))));let S=v.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(g)!==null?S=S.withResumeToken(Jt.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(g,S),(function(U,B,W){return U.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=xT?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(v,S,d)&&l.push(n.Pi.updateTargetData(i,S))}));let u=nn(),f=ut();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(FT(i,a,t.documentUpdates).next((d=>{u=d.ks,f=d.qs}))),!r.isEqual(nt.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((g=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return D.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.Ms=s,i)))}function FT(e,t,n){let r=ut(),s=ut();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=nn();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(nt.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Sl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function UT(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=pl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function BT(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,D.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new yn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function Fa(e,t,n){const r=st(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Lr(a))throw a;H(Sl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function sh(e,t,n){const r=st(e);let s=nt.min(),i=ut();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const g=st(u),v=g.xs.get(d);return v!==void 0?D.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,d)})(r,a,Fe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:nt.min(),n?i:ut()))).next((l=>(jT(r,Sv(t),l),{documents:l,Qs:i})))))}function jT(e,t,n){let r=e.Os.get(t)||nt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class ih{constructor(){this.activeTargetIds=Nv()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class $T{constructor(){this.Mo=new ih,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ih,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="ConnectivityMonitor";class ah{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(oh,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(oh,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi=null;function Ua(){return pi===null?pi=(function(){return 268435456+Math.round(2147483648*Math.random())})():pi++,"0x"+pi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="RestConnection",HT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zT{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===$i?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=Ua(),l=this.zo(t,n.toUriEncodedString());H(ia,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:f}=new URL(l),d=ul(f);return this.Jo(t,l,u,r,d).then((g=>(H(ia,`Received RPC '${t}' ${a}: `,g),g)),(g=>{throw Rr(ia,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=HT[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="WebChannelConnection";class WT extends zT{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Ua();return new Promise(((l,u)=>{const f=new Wf;f.setWithCredentials(!0),f.listenOnce(Gf.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ii.NO_ERROR:const g=f.getResponseJson();H(ee,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case Ii.TIMEOUT:H(ee,`RPC '${t}' ${a} timed out`),u(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case Ii.HTTP_ERROR:const v=f.getStatus();if(H(ee,`RPC '${t}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const x=S==null?void 0:S.error;if(x&&x.status&&x.message){const U=(function(W){const G=W.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(G)>=0?G:V.UNKNOWN})(x.status);u(new z(U,x.message))}else u(new z(V.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new z(V.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{H(ee,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(ee,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}T_(t,n,r){const s=Ua(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Yf(),l=Xf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(ee,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let v=!1,S=!1;const x=new KT({Yo:B=>{S?H(ee,`Not sending because RPC '${t}' stream ${s} is closed:`,B):(v||(H(ee,`Opening RPC '${t}' stream ${s} transport.`),g.open(),v=!0),H(ee,`RPC '${t}' stream ${s} sending:`,B),g.send(B))},Zo:()=>g.close()}),U=(B,W,G)=>{B.listen(W,(Q=>{try{G(Q)}catch(K){setTimeout((()=>{throw K}),0)}}))};return U(g,cs.EventType.OPEN,(()=>{S||(H(ee,`RPC '${t}' stream ${s} transport opened.`),x.o_())})),U(g,cs.EventType.CLOSE,(()=>{S||(S=!0,H(ee,`RPC '${t}' stream ${s} transport closed`),x.a_(),this.E_(g))})),U(g,cs.EventType.ERROR,(B=>{S||(S=!0,Rr(ee,`RPC '${t}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),x.a_(new z(V.UNAVAILABLE,"The operation could not be completed")))})),U(g,cs.EventType.MESSAGE,(B=>{var W;if(!S){const G=B.data[0];yt(!!G,16349);const Q=G,K=(Q==null?void 0:Q.error)||((W=Q[0])==null?void 0:W.error);if(K){H(ee,`RPC '${t}' stream ${s} received error:`,K);const rt=K.status;let Et=(function(_){const I=Lt[_];if(I!==void 0)return xd(I)})(rt),w=K.message;Et===void 0&&(Et=V.INTERNAL,w="Unknown error status: "+rt+" with message "+K.message),S=!0,x.a_(new z(Et,w)),g.close()}else H(ee,`RPC '${t}' stream ${s} received:`,G),x.u_(G)}})),U(l,Qf.STAT_EVENT,(B=>{B.stat===Sa.PROXY?H(ee,`RPC '${t}' stream ${s} detected buffering proxy`):B.stat===Sa.NOPROXY&&H(ee,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function oa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(e){return new Yv(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="PersistentStream";class Gd{constructor(t,n,r,s,i,a,l,u){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wd(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(en(n.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new z(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return H(lh,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(H(lh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GT extends Gd{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=tT(this.serializer,t),r=(function(i){if(!("targetChange"in i))return nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?nt.min():a.readTime?Ue(a.readTime):nt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=La(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=Da(u)?{documents:rT(i,u)}:{query:sT(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=kd(i,a.resumeToken);const f=Oa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(nt.min())>0){l.readTime=Gi(i,a.snapshotVersion.toTimestamp());const f=Oa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=oT(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=La(this.serializer),n.removeTarget=t,this.q_(n)}}class QT extends Gd{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=nT(t.writeResults,t.commitTime),r=Ue(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=La(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>eT(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{}class YT extends XT{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,Ma(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(V.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,Ma(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(V.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class JT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(en(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="RemoteStore";class ZT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{tr(this)&&(H(Xn,"Restarting streams for network reachability change."),await(async function(u){const f=st(u);f.Ea.add(4),await Gs(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ao(f)})(this))}))})),this.Ra=new JT(r,s)}}async function Ao(e){if(tr(e))for(const t of e.da)await t(!0)}async function Gs(e){for(const t of e.da)await t(!1)}function Qd(e,t){const n=st(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Vl(n)?Pl(n):Fr(n).O_()&&Cl(n,t))}function Rl(e,t){const n=st(e),r=Fr(n);n.Ia.delete(t),r.O_()&&Xd(n,t),n.Ia.size===0&&(r.O_()?r.L_():tr(n)&&n.Ra.set("Unknown"))}function Cl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fr(e).Y_(t)}function Xd(e,t){e.Va.Ue(t),Fr(e).Z_(t)}function Pl(e){e.Va=new Wv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Fr(e).start(),e.Ra.ua()}function Vl(e){return tr(e)&&!Fr(e).x_()&&e.Ia.size>0}function tr(e){return st(e).Ea.size===0}function Yd(e){e.Va=void 0}async function tI(e){e.Ra.set("Online")}async function eI(e){e.Ia.forEach(((t,n)=>{Cl(e,t)}))}async function nI(e,t){Yd(e),Vl(e)?(e.Ra.ha(t),Pl(e)):e.Ra.set("Unknown")}async function rI(e,t,n){if(e.Ra.set("Online"),t instanceof Md&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){H(Xn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Xi(e,r)}else if(t instanceof Si?e.Va.Ze(t):t instanceof Od?e.Va.st(t):e.Va.tt(t),!n.isEqual(nt.min()))try{const r=await Kd(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(f);d&&i.Ia.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(Jt.EMPTY_BYTE_STRING,d.snapshotVersion)),Xd(i,u);const g=new yn(d.target,u,f,d.sequenceNumber);Cl(i,g)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Xn,"Failed to raise snapshot:",r),await Xi(e,r)}}async function Xi(e,t,n){if(!Lr(t))throw t;e.Ea.add(1),await Gs(e),e.Ra.set("Offline"),n||(n=()=>Kd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Xn,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ao(e)}))}function Jd(e,t){return t().catch((n=>Xi(e,n,t)))}async function bo(e){const t=st(e),n=Dn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:pl;for(;sI(t);)try{const s=await UT(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,iI(t,s)}catch(s){await Xi(t,s)}Zd(t)&&tp(t)}function sI(e){return tr(e)&&e.Ta.length<10}function iI(e,t){e.Ta.push(t);const n=Dn(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Zd(e){return tr(e)&&!Dn(e).x_()&&e.Ta.length>0}function tp(e){Dn(e).start()}async function oI(e){Dn(e).ra()}async function aI(e){const t=Dn(e);for(const n of e.Ta)t.ea(n.mutations)}async function lI(e,t,n){const r=e.Ta.shift(),s=vl.from(r,t,n);await Jd(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await bo(e)}async function cI(e,t){t&&Dn(e).X_&&await(async function(r,s){if((function(a){return Hv(a)&&a!==V.ABORTED})(s.code)){const i=r.Ta.shift();Dn(r).B_(),await Jd(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await bo(r)}})(e,t),Zd(e)&&tp(e)}async function ch(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Xn,"RemoteStore received new credentials");const r=tr(n);n.Ea.add(3),await Gs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ao(n)}async function uI(e,t){const n=st(e);t?(n.Ea.delete(2),await Ao(n)):t||(n.Ea.add(2),await Gs(n),n.Ra.set("Unknown"))}function Fr(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.sa(),new GT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:tI.bind(null,e),t_:eI.bind(null,e),r_:nI.bind(null,e),H_:rI.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Vl(e)?Pl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Yd(e))}))),e.ma}function Dn(e){return e.fa||(e.fa=(function(n,r,s){const i=st(n);return i.sa(),new QT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:oI.bind(null,e),r_:cI.bind(null,e),ta:aI.bind(null,e),na:lI.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await bo(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Xn,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Dl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nl(e,t){if(en("AsyncQueue",`${t}: ${e}`),Lr(e))return new z(V.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{static emptySet(t){return new vr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=us(),this.sortedSet=new Dt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof vr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new vr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this.ga=new Dt(X.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):tt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Nr{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Nr(t,n,vr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class fI{constructor(){this.queries=hh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=hh(),i.forEach(((a,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new z(V.ABORTED,"Firestore shutting down"))}}function hh(){return new Jn((e=>vd(e)),yo)}async function dI(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new hI,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Nl(a,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&xl(n)}async function pI(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gI(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&xl(n)}function mI(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function xl(e){e.Ca.forEach((t=>{t.next()}))}var Ba,fh;(fh=Ba||(Ba={})).Ma="default",fh.Cache="cache";class _I{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Nr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Nr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ba.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t){this.key=t}}class np{constructor(t){this.key=t}}class yI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=Td(t),this.tu=new vr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new uh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,g)=>{const v=s.get(d),S=Eo(this.query,g)?g:null,x=!!v&&this.mutatedKeys.has(v.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let B=!1;v&&S?v.data.isEqual(S.data)?x!==U&&(r.track({type:3,doc:S}),B=!0):this.su(v,S)||(r.track({type:2,doc:S}),B=!0,(u&&this.eu(S,u)>0||f&&this.eu(S,f)<0)&&(l=!0)):!v&&S?(r.track({type:0,doc:S}),B=!0):v&&!S&&(r.track({type:1,doc:v}),B=!0,(u||f)&&(l=!0)),B&&(S?(a=a.add(S),i=U?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,g)=>(function(S,x){const U=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:B})}};return U(S)-U(x)})(d.type,g.type)||this.eu(d.doc,g.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Nr(this.query,t.tu,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new np(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new ep(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Nr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ol="SyncEngine";class EI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class vI{constructor(t){this.key=t,this.hu=!1}}class TI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Jn((l=>vd(l)),yo),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(X.comparator),this.Au=new Map,this.Ru=new wl,this.Vu={},this.mu=new Map,this.fu=Dr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function II(e,t,n=!0){const r=lp(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await rp(r,t,n,!0),s}async function wI(e,t){const n=lp(e);await rp(n,t,!0,!1)}async function rp(e,t,n,r){const s=await BT(e.localStore,Fe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await AI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Qd(e.remoteStore,s),l}async function AI(e,t,n,r,s){e.pu=(g,v,S)=>(async function(U,B,W,G){let Q=B.view.ru(W);Q.Cs&&(Q=await sh(U.localStore,B.query,!1).then((({documents:w})=>B.view.ru(w,Q))));const K=G&&G.targetChanges.get(B.targetId),rt=G&&G.targetMismatches.get(B.targetId)!=null,Et=B.view.applyChanges(Q,U.isPrimaryClient,K,rt);return ph(U,B.targetId,Et.au),Et.snapshot})(e,g,v,S);const i=await sh(e.localStore,t,!0),a=new yI(t,i.Qs),l=a.ru(i.documents),u=Ws.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);ph(e,n,f.au);const d=new EI(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function bI(e,t,n){const r=st(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!yo(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fa(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rl(r.remoteStore,s.targetId),ja(r,s.targetId)})).catch(kr)):(ja(r,s.targetId),await Fa(r.localStore,s.targetId,!0))}async function SI(e,t){const n=st(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rl(n.remoteStore,r.targetId))}async function RI(e,t,n){const r=OI(e);try{const s=await(function(a,l){const u=st(a),f=Pt.now(),d=l.reduce(((S,x)=>S.add(x.key)),ut());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let x=nn(),U=ut();return u.Ns.getEntries(S,d).next((B=>{x=B,x.forEach(((W,G)=>{G.isValidDocument()||(U=U.add(W))}))})).next((()=>u.localDocuments.getOverlayedDocuments(S,x))).next((B=>{g=B;const W=[];for(const G of l){const Q=Uv(G,g.get(G.key).overlayedDocument);Q!=null&&W.push(new Zn(G.key,Q,hd(Q.value.mapValue),Xe.exists(!0)))}return u.mutationQueue.addMutationBatch(S,f,W,l)})).next((B=>{v=B;const W=B.applyToLocalDocumentSet(g,U);return u.documentOverlayCache.saveOverlays(S,B.batchId,W)}))})).then((()=>({batchId:v.batchId,changes:wd(g)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Dt(ct)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f})(r,s.batchId,n),await Qs(r,s.changes),await bo(r.remoteStore)}catch(s){const i=Nl(s,"Failed to persist write");n.reject(i)}}async function sp(e,t){const n=st(e);try{const r=await LT(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?yt(a.hu,14607):s.removedDocuments.size>0&&(yt(a.hu,42227),a.hu=!1))})),await Qs(n,r,t)}catch(r){await kr(r)}}function dh(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=st(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,g)=>{for(const v of g.Sa)v.va(l)&&(f=!0)})),f&&xl(u)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function CI(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new Dt(X.comparator);a=a.insert(i,ie.newNoDocument(i,nt.min()));const l=ut().add(i),u=new Io(nt.min(),new Map,new Dt(ct),a,l);await sp(r,u),r.du=r.du.remove(i),r.Au.delete(t),Ml(r)}else await Fa(r.localStore,t,!1).then((()=>ja(r,t,n))).catch(kr)}async function PI(e,t){const n=st(e),r=t.batch.batchId;try{const s=await kT(n.localStore,t);op(n,r,null),ip(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qs(n,s)}catch(s){await kr(s)}}async function VI(e,t,n){const r=st(e);try{const s=await(function(a,l){const u=st(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((g=>(yt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(f,g)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);op(r,t,n),ip(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qs(r,s)}catch(s){await kr(s)}}function ip(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function op(e,t,n){const r=st(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function ja(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||ap(e,r)}))}function ap(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Rl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ml(e))}function ph(e,t,n){for(const r of n)r instanceof ep?(e.Ru.addReference(r.key,t),DI(e,r)):r instanceof np?(H(Ol,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||ap(e,r.key)):tt(19791,{wu:r})}function DI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(H(Ol,"New document in limbo: "+n),e.Eu.add(r),Ml(e))}function Ml(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new X(bt.fromString(t)),r=e.fu.next();e.Au.set(r,new vI(n)),e.du=e.du.insert(n,r),Qd(e.remoteStore,new yn(Fe(yd(n.path)),r,"TargetPurposeLimboResolution",go.ce))}}async function Qs(e,t,n){const r=st(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{a.push(r.pu(u,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(f){s.push(f);const g=bl.As(u.targetId,f);i.push(g)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(u,f){const d=st(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>D.forEach(f,(v=>D.forEach(v.Es,(S=>d.persistence.referenceDelegate.addReference(g,v.targetId,S))).next((()=>D.forEach(v.ds,(S=>d.persistence.referenceDelegate.removeReference(g,v.targetId,S)))))))))}catch(g){if(!Lr(g))throw g;H(Sl,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const S=d.Ms.get(v),x=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(v,U)}}})(r.localStore,i))}async function NI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H(Ol,"User change. New user:",t.toKey());const r=await zd(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((u=>{u.reject(new z(V.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Qs(n,r.Ls)}}function xI(e,t){const n=st(e),r=n.Au.get(t);if(r&&r.hu)return ut().add(r.key);{let s=ut();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function lp(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=CI.bind(null,t),t.Pu.H_=gI.bind(null,t.eventManager),t.Pu.yu=mI.bind(null,t.eventManager),t}function OI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=VI.bind(null,t),t}class Yi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wo(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return MT(this.persistence,new NT,t.initialUser,this.serializer)}Cu(t){return new Hd(Al.mi,this.serializer)}Du(t){return new $T}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yi.provider={build:()=>new Yi};class MI extends Yi{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){yt(this.persistence.referenceDelegate instanceof Qi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _T(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?he.withCacheSize(this.cacheSizeBytes):he.DEFAULT;return new Hd((r=>Qi.mi(r,n)),this.serializer)}}class $a{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NI.bind(null,this.syncEngine),await uI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new fI})()}createDatastore(t){const n=wo(t.databaseInfo.databaseId),r=(function(i){return new WT(i)})(t.databaseInfo);return(function(i,a,l,u){return new YT(i,a,l,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new ZT(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>dh(this.syncEngine,n,0)),(function(){return ah.v()?new ah:new qT})())}createSyncEngine(t,n){return(function(s,i,a,l,u,f,d){const g=new TI(s,i,a,l,u,f);return d&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Xn,"RemoteStore shutting down."),i.Ea.add(5),await Gs(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}$a.provider={build:()=>new $a};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):en("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="FirestoreClient";class LI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=re.UNAUTHENTICATED,this.clientId=dl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Nn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Nn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Nl(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function aa(e,t){e.asyncQueue.verifyOperationInProgress(),H(Nn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await zd(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function gh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await FI(e);H(Nn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>ch(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>ch(t.remoteStore,s))),e._onlineComponents=t}async function FI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Nn,"Using user provided OfflineComponentProvider");try{await aa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Rr("Error using user provided cache. Falling back to memory cache: "+n),await aa(e,new Yi)}}else H(Nn,"Using default OfflineComponentProvider"),await aa(e,new MI(void 0));return e._offlineComponents}async function cp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Nn,"Using user provided OnlineComponentProvider"),await gh(e,e._uninitializedComponentsProvider._online)):(H(Nn,"Using default OnlineComponentProvider"),await gh(e,new $a))),e._onlineComponents}function UI(e){return cp(e).then((t=>t.syncEngine))}async function BI(e){const t=await cp(e),n=t.eventManager;return n.onListen=II.bind(null,t.syncEngine),n.onUnlisten=bI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=wI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=SI.bind(null,t.syncEngine),n}function jI(e,t,n={}){const r=new An;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new kI({next:v=>{d.Nu(),a.enqueueAndForget((()=>pI(i,g))),v.fromCache&&u.source==="server"?f.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new _I(l,d,{includeMetadataChanges:!0,qa:!0});return dI(i,g)})(await BI(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="firestore.googleapis.com",_h=!0;class yh{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hp,this.ssl=_h}else this.host=t.host,this.ssl=t.ssl??_h;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=qd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gT)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ZE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=up(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class So{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qE;switch(r.type){case"firstParty":return new WE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=mh.get(n);r&&(H("ComponentProvider","Removing Datastore"),mh.delete(n),r.terminate())})(this),Promise.resolve()}}function $I(e,t,n,r={}){var f;e=Bi(e,So);const s=ul(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(yy(`https://${l}`),Iy("Firestore",!0)),i.host!==hp&&i.host!==l&&Rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Li(u,a)&&(e._setSettings(u),r.mockUserToken)){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=re.MOCK_USER;else{d=Ey(r.mockUserToken,(f=e._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new re(v)}e._authCredentials=new HE(new Zf(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ur(this.firestore,t,this._query)}}class Kt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kt(this.firestore,t,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Hs(n,Kt._jsonSchema))return new Kt(t,r||null,new X(bt.fromString(n.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Ut("string",Kt._jsonSchemaVersion),referencePath:Ut("string")};class bn extends Ur{constructor(t,n,r){super(t,n,yd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kt(this.firestore,null,new X(t))}withConverter(t){return new bn(this.firestore,t,this._path)}}function fp(e,t,...n){if(e=Sr(e),td("collection","path",t),e instanceof So){const r=bt.fromString(t,...n);return Du(r),new bn(e,null,r)}{if(!(e instanceof Kt||e instanceof bn))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bt.fromString(t,...n));return Du(r),new bn(e.firestore,null,r)}}function qI(e,t,...n){if(e=Sr(e),arguments.length===1&&(t=dl.newId()),td("doc","path",t),e instanceof So){const r=bt.fromString(t,...n);return Vu(r),new Kt(e,null,new X(r))}{if(!(e instanceof Kt||e instanceof bn))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bt.fromString(t,...n));return Vu(r),new Kt(e.firestore,e instanceof bn?e.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="AsyncQueue";class vh{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wd(this,"async_queue_retry"),this._c=()=>{const r=oa();r&&H(Eh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=oa();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=oa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new An;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Lr(t))throw t;H(Eh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,en("INTERNAL UNHANDLED ERROR: ",Th(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=Dl.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&tt(47125,{Pc:Th(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Th(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class kl extends So{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new vh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vh(t),this._firestoreClient=void 0,await t}}}function HI(e,t){const n=typeof e=="object"?e:NE(),r=typeof e=="string"?e:$i,s=RE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=my("firestore");i&&$I(s,...i)}return s}function dp(e){if(e._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||zI(e),e._firestoreClient}function zI(e){var r,s,i;const t=e._freezeSettings(),n=(function(l,u,f,d){return new uv(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,up(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((r=e._app)==null?void 0:r.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new LI(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ie(Jt.fromBase64String(t))}catch(n){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ie(Jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ie._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Hs(t,Ie._jsonSchema))return Ie.fromBase64String(t.bytes)}}Ie._jsonSchemaVersion="firestore/bytes/1.0",Ie._jsonSchema={type:Ut("string",Ie._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Be._jsonSchemaVersion}}static fromJSON(t){if(Hs(t,Be._jsonSchema))return new Be(t.latitude,t.longitude)}}Be._jsonSchemaVersion="firestore/geoPoint/1.0",Be._jsonSchema={type:Ut("string",Be._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:je._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Hs(t,je._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new je(t.vectorValues);throw new z(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}je._jsonSchemaVersion="firestore/vectorValue/1.0",je._jsonSchema={type:Ut("string",je._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=/^__.*__$/;class WI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Zn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ks(t,this.data,n,this.fieldTransforms)}}function gp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:e})}}class Fl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Fl({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ji(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(gp(this.Ac)&&KI.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class GI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||wo(t)}Cc(t,n,r,s=!1){return new Fl({Ac:t,methodName:n,Dc:r,path:Xt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(e){const t=e._freezeSettings(),n=wo(e._databaseId);return new GI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function QI(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Ep("Data must be an object, but it was:",a,r);const l=_p(r,a);let u,f;if(i.merge)u=new Se(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const g of i.mergeFields){const v=YI(t,g,n);if(!a.contains(v))throw new z(V.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);ZI(d,v)||d.push(v)}u=new Se(d),f=a.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,f=a.fieldTransforms;return new WI(new Te(l),u,f)}function XI(e,t,n,r=!1){return Ul(n,e.Cc(r?4:3,t))}function Ul(e,t){if(yp(e=Sr(e)))return Ep("Unsupported field value:",t,e),_p(e,t);if(e instanceof pp)return(function(r,s){if(!gp(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=Ul(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Sr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pt.fromDate(r);return{timestampValue:Gi(s.serializer,i)}}if(r instanceof Pt){const i=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gi(s.serializer,i)}}if(r instanceof Be)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ie)return{bytesValue:kd(s.serializer,r._byteString)};if(r instanceof Kt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Il(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof je)return(function(a,l){return{mapValue:{fields:{[cd]:{stringValue:ud},[qi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return El(l.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${po(r)}`)})(e,t)}function _p(e,t){const n={};return rd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yn(e,((r,s)=>{const i=Ul(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function yp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pt||e instanceof Be||e instanceof Ie||e instanceof Kt||e instanceof pp||e instanceof je)}function Ep(e,t,n){if(!yp(n)||!ed(n)){const r=po(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function YI(e,t,n){if((t=Sr(t))instanceof Ll)return t._internalPath;if(typeof t=="string")return vp(e,t);throw Ji("Field path arguments must be of type string or ",e,!1,void 0,n)}const JI=new RegExp("[~\\*/\\[\\]]");function vp(e,t,n){if(t.search(JI)>=0)throw Ji(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ll(...t.split("."))._internalPath}catch{throw Ji(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ji(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new z(V.INVALID_ARGUMENT,l+e+u)}function ZI(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new tw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ip("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tw extends Tp{data(){return super.data()}}function Ip(e,t){return typeof t=="string"?vp(e,t):t instanceof Ll?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bl{}class nw extends Bl{}function rw(e,t,...n){let r=[];t instanceof Bl&&r.push(t),r=r.concat(n),(function(i){const a=i.filter((u=>u instanceof $l)).length,l=i.filter((u=>u instanceof jl)).length;if(a>1||a>0&&l>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)e=s._apply(e);return e}class jl extends nw{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new jl(t,n,r)}_apply(t){const n=this._parse(t);return wp(t._query,n),new Ur(t.firestore,t.converter,Na(t._query,n))}_parse(t){const n=mp(t.firestore);return(function(i,a,l,u,f,d,g){let v;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wh(g,d);const x=[];for(const U of g)x.push(Ih(u,i,U));v={arrayValue:{values:x}}}else v=Ih(u,i,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wh(g,d),v=XI(l,a,g,d==="in"||d==="not-in");return Ft.create(f,d,v)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class $l extends Bl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new $l(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)wp(a,u),a=Na(a,u)})(t._query,n),new Ur(t.firestore,t.converter,Na(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ih(e,t,n){if(typeof(n=Sr(n))=="string"){if(n==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ed(t)&&n.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(bt.fromString(n));if(!X.isDocumentKey(r))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uu(e,new X(r))}if(n instanceof Kt)return Uu(e,n._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${po(n)}.`)}function wh(e,t){if(!Array.isArray(e)||e.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function wp(e,t){const n=(function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(e.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class sw{convertValue(t,n="none"){switch(Vn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Pn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Yn(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var r,s,i;const n=(i=(s=(r=t.fields)==null?void 0:r[qi].arrayValue)==null?void 0:s.values)==null?void 0:i.map((a=>xt(a.doubleValue)));return new je(n)}convertGeoPoint(t){return new Be(xt(t.latitude),xt(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=_o(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ms(t));default:return null}}convertTimestamp(t){const n=Cn(t);return new Pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=bt.fromString(t);yt($d(r),9688,{name:t});const s=new ks(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||en(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class gi{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Tr extends Tp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ri(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ip("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Tr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Tr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tr._jsonSchema={type:Ut("string",Tr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ri extends Tr{data(t={}){return super.data(t)}}class Ir{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Ri(this._firestore,this._userDataWriter,r.key,r,new gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const u=new Ri(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const u=new Ri(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:ow(l.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ir._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=dl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ow(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}Ir._jsonSchemaVersion="firestore/querySnapshot/1.0",Ir._jsonSchema={type:Ut("string",Ir._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class aw extends sw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ie(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function lw(e){e=Bi(e,Ur);const t=Bi(e.firestore,kl),n=dp(t),r=new aw(t);return ew(e._query),jI(n,e._query).then((s=>new Ir(t,r,e,s)))}function cw(e,t){const n=Bi(e.firestore,kl),r=qI(e),s=iw(e.converter,t);return uw(n,[QI(mp(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Xe.exists(!1))]).then((()=>r))}function uw(e,t){return(function(r,s){const i=new An;return r.asyncQueue.enqueueAndForget((async()=>RI(await UI(r),s,i))),i.promise})(dp(e),t)}(function(t,n=!0){(function(s){Mr=s})(DE),Ui(new Ns("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new kl(new zE(r.getProvider("auth-internal")),new GE(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(f.options.projectId,d)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Er(Su,Ru,t),Er(Su,Ru,"esm2020")})();var hw="firebase",fw="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(hw,fw,"app");const dw={apiKey:"AIzaSyBOzjvNvtljSrWIZ5omnoDzc5WKCmWuUfg",authDomain:"brew-n-save-bryant.firebaseapp.com",projectId:"brew-n-save-bryant",storageBucket:"brew-n-save-bryant.firebasestorage.app",messagingSenderId:"250055878376",appId:"1:250055878376:web:791a833361f9321dec0b5d"},pw=qf(dw),Ap=HI(pw),Ah=["Hot","Cold"],mi=async e=>(await lw(rw(fp(Ap,e)))).docs.map(n=>({id:n.id,...n.data()})),bp=O_("BeverageStore",{state:()=>({temps:Ah,bases:[],creamers:[],syrups:[],beverages:[],currentBase:null,currentCreamer:null,currentSyrup:null,currentTemp:Ah[0]||"Hot"}),getters:{isIced(e){return e.currentTemp==="Cold"}},actions:{async init(){if(this.bases.length)return;const[e,t,n,r]=await Promise.all([mi("bases"),mi("creamers"),mi("syrups"),mi("beverages")]);this.bases=e,this.creamers=t,this.syrups=n,this.beverages=r,this.currentBase=this.bases[0]||null,this.currentCreamer=this.creamers[0]||null,this.currentSyrup=this.syrups[0]||null},async makeBeverage(e){if(!this.currentBase||!this.currentCreamer||!this.currentSyrup||!this.currentTemp)return;const t=(e||"").trim();if(!t)return;const n={name:t,base:this.currentBase,creamer:this.currentCreamer,syrup:this.currentSyrup,temp:this.currentTemp},r=await cw(fp(Ap,"beverages"),n);this.beverages.push({id:r.id,...n})},showBeverage(e){this.currentBase=e.base,this.currentCreamer=e.creamer,this.currentSyrup=e.syrup,this.currentTemp=e.temp||this.temps[0]||this.currentTemp}}}),gw=$s({name:"App",components:{Beverage:iy},data(){return{newBeverageName:""}},computed:{beverageStore(){return bp()},selectedBaseId:{get(){var e;return((e=this.beverageStore.currentBase)==null?void 0:e.id)||""},set(e){const t=this.beverageStore.bases.find(n=>n.id===e)||null;this.beverageStore.currentBase=t}},selectedCreamerId:{get(){var e;return((e=this.beverageStore.currentCreamer)==null?void 0:e.id)||""},set(e){const t=this.beverageStore.creamers.find(n=>n.id===e)||null;this.beverageStore.currentCreamer=t}},selectedSyrupId:{get(){var e;return((e=this.beverageStore.currentSyrup)==null?void 0:e.id)||""},set(e){const t=this.beverageStore.syrups.find(n=>n.id===e)||null;this.beverageStore.currentSyrup=t}},selectedTemp:{get(){return this.beverageStore.currentTemp||""},set(e){this.beverageStore.currentTemp=e}}},methods:{handleMakeBeverage(){const e=this.newBeverageName.trim();e&&(this.beverageStore.makeBeverage(e),this.newBeverageName="")},isCurrentSelection(e){var t,n,r;return((t=this.beverageStore.currentBase)==null?void 0:t.id)===e.base.id&&((n=this.beverageStore.currentCreamer)==null?void 0:n.id)===e.creamer.id&&((r=this.beverageStore.currentSyrup)==null?void 0:r.id)===e.syrup.id&&this.beverageStore.currentTemp===e.temp}}}),mw={class:"app"},_w={key:0},yw={class:"temps"},Ew=["value"],vw={class:"controls"},Tw={class:"control"},Iw=["value"],ww={class:"control"},Aw=["value"],bw={class:"control"},Sw=["value"],Rw={class:"name-row"},Cw={class:"control beverage-name"},Pw={class:"control make-beverage"},Vw={key:1},Dw={id:"beverage-container"},Nw={key:0},xw={key:1},Ow=["checked","onChange"];function Mw(e,t,n,r,s,i){const a=im("Beverage");return pt(),Ct(Ot,null,[It("div",mw,[e.beverageStore.currentBase&&e.beverageStore.currentCreamer&&e.beverageStore.currentSyrup?(pt(),Ct("div",_w,[ye(a,{isIced:e.beverageStore.isIced,base:e.beverageStore.currentBase,creamer:e.beverageStore.currentCreamer,syrup:e.beverageStore.currentSyrup},null,8,["isIced","base","creamer","syrup"]),It("div",yw,[(pt(!0),Ct(Ot,null,gn(e.beverageStore.temps,l=>(pt(),Ct("label",{key:l,class:"temp-option"},[is(It("input",{type:"radio",name:"temperature",value:l,"onUpdate:modelValue":t[0]||(t[0]=u=>e.selectedTemp=u)},null,8,Ew),[[v_,e.selectedTemp]]),ma(" "+cr(l),1)]))),128))]),It("div",vw,[It("div",Tw,[t[7]||(t[7]=It("label",{for:"base"},"Base Beverage",-1)),is(It("select",{id:"base","onUpdate:modelValue":t[1]||(t[1]=l=>e.selectedBaseId=l)},[(pt(!0),Ct(Ot,null,gn(e.beverageStore.bases,l=>(pt(),Ct("option",{key:l.id,value:l.id},cr(l.name),9,Iw))),128))],512),[[Yo,e.selectedBaseId]])]),It("div",ww,[t[8]||(t[8]=It("label",{for:"creamer"},"Creamer",-1)),is(It("select",{id:"creamer","onUpdate:modelValue":t[2]||(t[2]=l=>e.selectedCreamerId=l)},[(pt(!0),Ct(Ot,null,gn(e.beverageStore.creamers,l=>(pt(),Ct("option",{key:l.id,value:l.id},cr(l.name),9,Aw))),128))],512),[[Yo,e.selectedCreamerId]])]),It("div",bw,[t[9]||(t[9]=It("label",{for:"syrup"},"Syrup",-1)),is(It("select",{id:"syrup","onUpdate:modelValue":t[3]||(t[3]=l=>e.selectedSyrupId=l)},[(pt(!0),Ct(Ot,null,gn(e.beverageStore.syrups,l=>(pt(),Ct("option",{key:l.id,value:l.id},cr(l.name),9,Sw))),128))],512),[[Yo,e.selectedSyrupId]])])]),It("div",Rw,[It("div",Cw,[t[10]||(t[10]=It("label",{for:"beverageName"},"Beverage Name",-1)),is(It("input",{id:"beverageName",type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>e.newBeverageName=l),placeholder:"Enter a name",onKeyup:t[5]||(t[5]=I_((...l)=>e.handleMakeBeverage&&e.handleMakeBeverage(...l),["enter"]))},null,544),[[E_,e.newBeverageName]])]),It("div",Pw,[It("button",{onClick:t[6]||(t[6]=(...l)=>e.handleMakeBeverage&&e.handleMakeBeverage(...l))},"Make Beverage")])])])):(pt(),Ct("div",Vw,"Loading beverages..."))]),It("div",Dw,[e.beverageStore.beverages.length===0?(pt(),Ct("div",Nw,"No beverages yet.")):(pt(),Ct("div",xw,[(pt(!0),Ct(Ot,null,gn(e.beverageStore.beverages,l=>(pt(),Ct("div",{key:l.id,class:"beverage-option"},[It("label",null,[It("input",{type:"radio",name:"saved-beverage",checked:e.isCurrentSelection(l),onChange:u=>e.beverageStore.showBeverage(l)},null,40,Ow),ma(" "+cr(l.name),1)])]))),128))]))])],64)}const kw=On(gw,[["render",Mw],["__scopeId","data-v-f5dbe639"]]),Sp=C_(),Rp=b_(kw);Rp.use(Sp);const Lw=bp(Sp),Fw=async()=>{try{await Lw.init()}catch(e){console.error("Failed to load beverages from Firestore:",e)}finally{Rp.mount("#app")}};Fw();
